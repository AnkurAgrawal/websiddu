var libFuncName=null;if("undefined"==typeof jQuery&&"undefined"==typeof Zepto&&"function"==typeof $)libFuncName=$;else if("function"==typeof jQuery)libFuncName=jQuery;else{if("function"!=typeof Zepto)throw new TypeError;libFuncName=Zepto}!function($,window,document,undefined){"use strict";$("head").append('<meta class="foundation-mq-small">'),$("head").append('<meta class="foundation-mq-medium">'),$("head").append('<meta class="foundation-mq-large">'),window.matchMedia=window.matchMedia||function(doc){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");return div.id="mq-test-1",div.style.cssText="position:absolute;top:-100em",fakeBody.style.background="none",fakeBody.appendChild(div),function(q){return div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>',docElem.insertBefore(fakeBody,refNode),bool=42===div.offsetWidth,docElem.removeChild(fakeBody),{matches:bool,media:q}}}(document),Array.prototype.filter||(Array.prototype.filter=function(fun){if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"==typeof fun){for(var res=[],thisp=arguments[1],i=0;len>i;i++)if(i in t){var val=t[i];fun&&fun.call(thisp,val,i,t)&&res.push(val)}return res}}),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&1/0!=n&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return-1}),$.fn.stop=$.fn.stop||function(){return this},window.Foundation={name:"Foundation",version:"4.3.2",cache:{},media_queries:{small:$(".foundation-mq-small").css("font-family").replace(/\'/g,""),medium:$(".foundation-mq-medium").css("font-family").replace(/\'/g,""),large:$(".foundation-mq-large").css("font-family").replace(/\'/g,"")},stylesheet:$("<style></style>").appendTo("head")[0].sheet,init:function(scope,libraries,method,options,response,nc){var library_arr,args=[scope,method,options,response],responses=[],nc=nc||!1;if(nc&&(this.nc=nc),this.rtl=/rtl/i.test($("html").attr("dir")),this.scope=scope||this.scope,libraries&&"string"==typeof libraries&&!/reflow/i.test(libraries)){if(/off/i.test(libraries))return this.off();if(library_arr=libraries.split(" "),library_arr.length>0)for(var i=library_arr.length-1;i>=0;i--)responses.push(this.init_lib(library_arr[i],args))}else{/reflow/i.test(libraries)&&(args[1]="reflow");for(var lib in this.libs)responses.push(this.init_lib(lib,args))}return"function"==typeof libraries&&args.unshift(libraries),this.response_obj(responses,args)},response_obj:function(response_arr,args){for(var i=0,len=args.length;len>i;i++)if("function"==typeof args[i])return args[i]({errors:response_arr.filter(function(s){return"string"==typeof s?s:void 0})});return response_arr},init_lib:function(lib,args){return this.trap(function(){return this.libs.hasOwnProperty(lib)?(this.patch(this.libs[lib]),this.libs[lib].init.apply(this.libs[lib],args)):function(){}}.bind(this),lib)},trap:function(fun,lib){if(!this.nc)try{return fun()}catch(e){return this.error({name:lib,message:"could not be initialized",more:e.name+" "+e.message})}return fun()},patch:function(lib){this.fix_outer(lib),lib.scope=this.scope,lib.rtl=this.rtl},inherit:function(scope,methods){for(var methods_arr=methods.split(" "),i=methods_arr.length-1;i>=0;i--)this.lib_methods.hasOwnProperty(methods_arr[i])&&(this.libs[scope.name][methods_arr[i]]=this.lib_methods[methods_arr[i]])},random_str:function(length){var chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");length||(length=Math.floor(Math.random()*chars.length));for(var str="",i=0;length>i;i++)str+=chars[Math.floor(Math.random()*chars.length)];return str},libs:{},lib_methods:{set_data:function(node,data){var id=[this.name,+new Date,Foundation.random_str(5)].join("-");return Foundation.cache[id]=data,node.attr("data-"+this.name+"-id",id),data},get_data:function(node){return Foundation.cache[node.attr("data-"+this.name+"-id")]},remove_data:function(node){node?(delete Foundation.cache[node.attr("data-"+this.name+"-id")],node.attr("data-"+this.name+"-id","")):$("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[$(this).attr("data-"+this.name+"-id")],$(this).attr("data-"+this.name+"-id","")})},throttle:function(fun,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout(function(){fun.apply(context,args)},delay)}},data_options:function(el){function isNumber(o){return!isNaN(o-0)&&null!==o&&""!==o&&o!==!1&&o!==!0}function trim(str){return"string"==typeof str?$.trim(str):str}var ii,p,opts={},opts_arr=(el.attr("data-options")||":").split(";"),opts_len=opts_arr.length;for(ii=opts_len-1;ii>=0;ii--)p=opts_arr[ii].split(":"),/true/i.test(p[1])&&(p[1]=!0),/false/i.test(p[1])&&(p[1]=!1),isNumber(p[1])&&(p[1]=parseInt(p[1],10)),2===p.length&&p[0].length>0&&(opts[trim(p[0])]=trim(p[1]));return opts},delay:function(fun,delay){return setTimeout(fun,delay)},scrollTo:function(el,to,duration){if(!(0>duration)){var difference=to-$(window).scrollTop(),perTick=difference/duration*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(perTick,10))||(window.scrollTo(0,$(window).scrollTop()+perTick),this.scrollTo(el,to,duration-10))}.bind(this),10)}},scrollLeft:function(el){return el.length?"scrollLeft"in el[0]?el[0].scrollLeft:el[0].pageXOffset:void 0},empty:function(obj){if(obj.length&&obj.length>0)return!1;if(obj.length&&0===obj.length)return!0;for(var key in obj)if(hasOwnProperty.call(obj,key))return!1;return!0},addCustomRule:function(rule,media){if(media===undefined)Foundation.stylesheet.insertRule(rule,Foundation.stylesheet.cssRules.length);else{var query=Foundation.media_queries[media];query!==undefined&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[media]+"{ "+rule+" }")}}},fix_outer:function(lib){lib.outerHeight=function(el,bool){return"function"==typeof Zepto?el.height():"undefined"!=typeof bool?el.outerHeight(bool):el.outerHeight()},lib.outerWidth=function(el,bool){return"function"==typeof Zepto?el.width():"undefined"!=typeof bool?el.outerWidth(bool):el.outerWidth()}},error:function(error){return error.name+" "+error.message+"; "+error.more},off:function(){return $(this.scope).off(".fndtn"),$(window).off(".fndtn"),!0},zj:$},$.fn.foundation=function(){var args=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(args)),this})}}(libFuncName,this,this.document),function($,window,document){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!1,scrolltop:!0,init:!1},init:function(section,method,options){Foundation.inherit(this,"data_options addCustomRule");var self=this;return"object"==typeof method?$.extend(!0,this.settings,method):"undefined"!=typeof options&&$.extend(!0,this.settings,options),"string"!=typeof method?($(".top-bar, [data-topbar]").each(function(){$.extend(!0,self.settings,self.data_options($(this))),self.settings.$w=$(window),self.settings.$topbar=$(this),self.settings.$section=self.settings.$topbar.find("section"),self.settings.$titlebar=self.settings.$topbar.children("ul").first(),self.settings.$topbar.data("index",0);var topbarContainer=self.settings.$topbar.parent();topbarContainer.hasClass("fixed")||topbarContainer.hasClass(self.settings.stickyClass)?(self.settings.$topbar.data("height",self.outerHeight(topbarContainer)),self.settings.$topbar.data("stickyoffset",topbarContainer.offset().top)):self.settings.$topbar.data("height",self.outerHeight(self.settings.$topbar));var breakpoint=$("<div class='top-bar-js-breakpoint'/>").insertAfter(self.settings.$topbar);self.settings.breakPoint=breakpoint.width(),breakpoint.remove(),self.assemble(),self.settings.is_hover&&self.settings.$topbar.find(".has-dropdown").addClass("not-click"),self.addCustomRule(".f-topbar-fixed { padding-top: "+self.settings.$topbar.data("height")+"px }"),self.settings.$topbar.parent().hasClass("fixed")&&$("body").addClass("f-topbar-fixed")}),self.settings.init||this.events(),this.settings.init):this[method].call(this,options)},toggle:function(){var self=this,topbar=$(".top-bar, [data-topbar]"),section=topbar.find("section, .section");self.breakpoint()&&(self.rtl?(section.css({right:"0%"}),section.find(">.name").css({right:"100%"})):(section.css({left:"0%"}),section.find(">.name").css({left:"100%"})),section.find("li.moved").removeClass("moved"),topbar.data("index",0),topbar.toggleClass("expanded").css("height","")),self.settings.scrolltop?topbar.hasClass("expanded")?topbar.parent().hasClass("fixed")&&(self.settings.scrolltop?(topbar.parent().removeClass("fixed"),topbar.addClass("fixed"),$("body").removeClass("f-topbar-fixed"),window.scrollTo(0,0)):topbar.parent().removeClass("expanded")):topbar.hasClass("fixed")&&(topbar.parent().addClass("fixed"),topbar.removeClass("fixed"),$("body").addClass("f-topbar-fixed")):(topbar.parent().hasClass(self.settings.stickyClass)&&topbar.parent().addClass("fixed"),topbar.parent().hasClass("fixed")&&(topbar.hasClass("expanded")?(topbar.addClass("fixed"),topbar.parent().addClass("expanded")):(topbar.removeClass("fixed"),topbar.parent().removeClass("expanded"),self.updateStickyPositioning())))},timer:null,events:function(){var self=this;$(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(e){e.preventDefault(),self.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(e){{var li=$(this),target=$(e.target),topbar=li.closest("[data-topbar], .top-bar");topbar.data("topbar")}return target.data("revealId")?void self.toggle():void(self.breakpoint()||(!self.settings.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),"A"===target[0].nodeName&&target.parent().hasClass("has-dropdown")&&e.preventDefault(),li.hasClass("hover")?(li.removeClass("hover").find("li").removeClass("hover"),li.parents("li.hover").removeClass("hover")):li.addClass("hover")))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(e){if(self.breakpoint()&&$(window).width()!=self.settings.breakPoint){e.preventDefault();var $this=$(this),topbar=$this.closest(".top-bar, [data-topbar]"),section=topbar.find("section, .section"),$selectedLi=($this.next(".dropdown").outerHeight(),$this.closest("li"));topbar.data("index",topbar.data("index")+1),$selectedLi.addClass("moved"),self.rtl?(section.css({right:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({right:100*topbar.data("index")+"%"})):(section.css({left:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({left:100*topbar.data("index")+"%"})),topbar.css("height",self.outerHeight($this.siblings("ul"),!0)+self.settings.$topbar.data("height"))}}),$(window).on("resize.fndtn.topbar",function(){if("undefined"!=typeof self.settings.$topbar){var stickyOffset,stickyContainer=self.settings.$topbar.parent("."+this.settings.stickyClass);if(!self.breakpoint()){var doToggle=self.settings.$topbar.hasClass("expanded");$(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover"),doToggle&&self.toggle()}stickyContainer.length>0&&(stickyContainer.hasClass("fixed")?(stickyContainer.removeClass("fixed"),stickyOffset=stickyContainer.offset().top,$(document.body).hasClass("f-topbar-fixed")&&(stickyOffset-=self.settings.$topbar.data("height")),self.settings.$topbar.data("stickyoffset",stickyOffset),stickyContainer.addClass("fixed")):(stickyOffset=stickyContainer.offset().top,self.settings.$topbar.data("stickyoffset",stickyOffset)))}}.bind(this)),$("body").on("click.fndtn.topbar",function(e){var parent=$(e.target).closest("li").closest("li.hover");parent.length>0||$(".top-bar li, [data-topbar] li").removeClass("hover")}),$(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(e){e.preventDefault();var $this=$(this),topbar=$this.closest(".top-bar, [data-topbar]"),section=topbar.find("section, .section"),$movedLi=$this.closest("li.moved"),$previousLevelUl=$movedLi.parent();topbar.data("index",topbar.data("index")-1),self.rtl?(section.css({right:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({right:100*topbar.data("index")+"%"})):(section.css({left:-(100*topbar.data("index"))+"%"}),section.find(">.name").css({left:100*topbar.data("index")+"%"})),0===topbar.data("index")?topbar.css("height",""):topbar.css("height",self.outerHeight($previousLevelUl,!0)+self.settings.$topbar.data("height")),setTimeout(function(){$movedLi.removeClass("moved")},300)})},breakpoint:function(){return $(document).width()<=this.settings.breakPoint||$("html").hasClass("lt-ie9")},assemble:function(){var self=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var $link=$(this),$dropdown=$link.siblings(".dropdown"),url=$link.attr("href");if(self.settings.mobile_show_parent_link&&url&&url.length>1)var $titleLi=$('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+url+'">'+$link.text()+"</a></li>");else var $titleLi=$('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');$titleLi.find("h5>a").html(1==self.settings.custom_back_text?self.settings.back_text:"&laquo; "+$link.html()),$dropdown.prepend($titleLi)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(ul){var total=0,self=this;return ul.find("> li").each(function(){total+=self.outerHeight($(this),!0)}),total},sticky:function(){var $window=$(window),self=this;$window.scroll(function(){self.updateStickyPositioning()})},updateStickyPositioning:function(){var klass="."+this.settings.stickyClass,$window=$(window);if($(klass).length>0){var distance=this.settings.$topbar.data("stickyoffset");$(klass).hasClass("expanded")||($window.scrollTop()>distance?$(klass).hasClass("fixed")||($(klass).addClass("fixed"),$("body").addClass("f-topbar-fixed")):$window.scrollTop()<=distance&&$(klass).hasClass("fixed")&&($(klass).removeClass("fixed"),$("body").removeClass("f-topbar-fixed")))}},off:function(){$(this.scope).off(".fndtn.topbar"),$(window).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document),function($,window){"use strict";Foundation.libs.tooltips={name:"tooltips",version:"4.3.2",settings:{selector:".has-tip",additionalInheritableClasses:[],tooltipClass:".tooltip",touchCloseText:"tap to close",appendTo:"body","disable-for-touch":!0,tipTemplate:function(selector,content){return'<span data-selector="'+selector+'" class="'+Foundation.libs.tooltips.settings.tooltipClass.substring(1)+'">'+content+'<span class="nub"></span></span>'}},cache:{},init:function(scope,method,options){Foundation.inherit(this,"data_options");var self=this;return"object"==typeof method?$.extend(!0,this.settings,method):"undefined"!=typeof options&&$.extend(!0,this.settings,options),"string"==typeof method?this[method].call(this,options):void(Modernizr.touch?$(this.scope).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(e){var settings=$.extend({},self.settings,self.data_options($(this)));settings["disable-for-touch"]||(e.preventDefault(),$(settings.tooltipClass).hide(),self.showOrCreateTip($(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltipClass,function(e){e.preventDefault(),$(this).fadeOut(150)}):$(this.scope).on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(e){var $this=$(this);/enter|over/i.test(e.type)?self.showOrCreateTip($this):("mouseout"===e.type||"mouseleave"===e.type)&&self.hide($this)}))},showOrCreateTip:function($target){var $tip=this.getTip($target);return $tip&&$tip.length>0?this.show($target):this.create($target)},getTip:function($target){var selector=this.selector($target),tip=null;return selector&&(tip=$('span[data-selector="'+selector+'"]'+this.settings.tooltipClass)),"object"==typeof tip?tip:!1},selector:function($target){var id=$target.attr("id"),dataSelector=$target.attr("data-tooltip")||$target.attr("data-selector");return(id&&id.length<1||!id)&&"string"!=typeof dataSelector&&(dataSelector="tooltip"+Math.random().toString(36).substring(7),$target.attr("data-selector",dataSelector)),id&&id.length>0?id:dataSelector},create:function($target){var $tip=$(this.settings.tipTemplate(this.selector($target),$("<div></div>").html($target.attr("title")).html())),classes=this.inheritable_classes($target);$tip.addClass(classes).appendTo(this.settings.appendTo),Modernizr.touch&&$tip.append('<span class="tap-to-close">'+this.settings.touchCloseText+"</span>"),$target.removeAttr("title").attr("title",""),this.show($target)},reposition:function(target,tip,classes){var width,nub,nubHeight,nubWidth,objPos;if(tip.css("visibility","hidden").show(),width=target.data("width"),nub=tip.children(".nub"),nubHeight=this.outerHeight(nub),nubWidth=this.outerHeight(nub),objPos=function(obj,top,right,bottom,left,width){return obj.css({top:top?top:"auto",bottom:bottom?bottom:"auto",left:left?left:"auto",right:right?right:"auto",width:width?width:"auto"}).end()},objPos(tip,target.offset().top+this.outerHeight(target)+10,"auto","auto",target.offset().left,width),$(window).width()<767)objPos(tip,target.offset().top+this.outerHeight(target)+10,"auto","auto",12.5,$(this.scope).width()),tip.addClass("tip-override"),objPos(nub,-nubHeight,"auto","auto",target.offset().left);else{var left=target.offset().left;Foundation.rtl&&(left=target.offset().left+target.offset().width-this.outerWidth(tip)),objPos(tip,target.offset().top+this.outerHeight(target)+10,"auto","auto",left,width),tip.removeClass("tip-override"),classes&&classes.indexOf("tip-top")>-1?objPos(tip,target.offset().top-this.outerHeight(tip),"auto","auto",left,width).removeClass("tip-override"):classes&&classes.indexOf("tip-left")>-1?objPos(tip,target.offset().top+this.outerHeight(target)/2-2.5*nubHeight,"auto","auto",target.offset().left-this.outerWidth(tip)-nubHeight,width).removeClass("tip-override"):classes&&classes.indexOf("tip-right")>-1&&objPos(tip,target.offset().top+this.outerHeight(target)/2-2.5*nubHeight,"auto","auto",target.offset().left+this.outerWidth(target)+nubHeight,width).removeClass("tip-override")}tip.css("visibility","visible").hide()},inheritable_classes:function(target){var inheritables=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additionalInheritableClasses),classes=target.attr("class"),filtered=classes?$.map(classes.split(" "),function(el){return-1!==$.inArray(el,inheritables)?el:void 0}).join(" "):"";return $.trim(filtered)},show:function($target){var $tip=this.getTip($target);this.reposition($target,$tip,$target.attr("class")),$tip.fadeIn(150)},hide:function($target){var $tip=this.getTip($target);$tip.fadeOut(150)},reload:function(){var $self=$(this);return $self.data("fndtn-tooltips")?$self.foundationTooltips("destroy").foundationTooltips("init"):$self.foundationTooltips("init")},off:function(){$(this.scope).off(".fndtn.tooltip"),$(this.settings.tooltipClass).each(function(i){$("[data-tooltip]").get(i).attr("title",$(this).text())}).remove()},reflow:function(){}}}(Foundation.zj,this,this.document),angular.module("ngProgress.provider",["ngProgress.directive"]).provider("ngProgress",function(){"use strict";this.autoStyle=!0,this.count=0,this.height="2px",this.color="firebrick",this.$get=["$document","$window","$compile","$rootScope","$timeout",function($document,$window,$compile,$rootScope,$timeout){var count=this.count,height=this.height,color=this.color,$scope=$rootScope,parent=$document.find("body")[0],progressbarEl=$compile("<ng-progress></ng-progress>")($scope);parent.appendChild(progressbarEl[0]),$scope.count=count,void 0!==height&&progressbarEl.eq(0).children().css("height",height),void 0!==color&&(progressbarEl.eq(0).children().css("background-color",color),progressbarEl.eq(0).children().css("color",color));var animation,intervalCounterId=0;return{start:function(){this.show();var self=this;clearInterval(intervalCounterId),intervalCounterId=setInterval(function(){if(isNaN(count))clearInterval(intervalCounterId),count=0,self.hide();else{var remaining=100-count;count+=.15*Math.pow(1-Math.sqrt(remaining),2),self.updateCount(count)}},200)},updateCount:function(new_count){$scope.count=new_count,$scope.$$phase||$scope.$apply()},height:function(new_height){return void 0!==new_height&&(height=new_height,$scope.height=height,$scope.$$phase||$scope.$apply()),height},color:function(new_color){return void 0!==new_color&&(color=new_color,$scope.color=color,$scope.$$phase||$scope.$apply()),color},hide:function(){progressbarEl.children().css("opacity","0");var self=this;self.animate(function(){progressbarEl.children().css("width","0%"),self.animate(function(){self.show()},500)},500)},show:function(){var self=this;self.animate(function(){progressbarEl.children().css("opacity","1")},100)},animate:function(fn,time){animation&&$timeout.cancel(animation),animation=$timeout(fn,time)},status:function(){return count},stop:function(){clearInterval(intervalCounterId)},set:function(new_count){return this.show(),this.updateCount(new_count),count=new_count,clearInterval(intervalCounterId),count},css:function(args){return progressbarEl.children().css(args)},reset:function(){return clearInterval(intervalCounterId),count=0,this.updateCount(count),0},complete:function(){count=100,this.updateCount(count);var self=this;return clearInterval(intervalCounterId),$timeout(function(){self.hide(),$timeout(function(){count=0,self.updateCount(count)},500)},1e3),count},setParent:function(newParent){if(null===newParent||void 0===newParent)throw new Error("Provide a valid parent of type HTMLElement");null!==parent&&void 0!==parent&&parent.removeChild(progressbarEl[0]),parent=newParent,parent.appendChild(progressbarEl[0])},getDomElement:function(){return progressbarEl}}}],this.setColor=function(color){return void 0!==color&&(this.color=color),this.color},this.setHeight=function(height){return void 0!==height&&(this.height=height),this.height}}),angular.module("ngProgress.directive",[]).directive("ngProgress",["$window","$rootScope",function($window,$rootScope){var directiveObj={replace:!0,restrict:"E",link:function($scope,$element){$rootScope.$watch("count",function(newVal){(void 0!==newVal||null!==newVal)&&($scope.counter=newVal,$element.eq(0).children().css("width",newVal+"%"))}),$rootScope.$watch("color",function(newVal){(void 0!==newVal||null!==newVal)&&($scope.color=newVal,$element.eq(0).children().css("background-color",newVal),$element.eq(0).children().css("color",newVal))}),$rootScope.$watch("height",function(newVal){(void 0!==newVal||null!==newVal)&&($scope.height=newVal,$element.eq(0).children().css("height",newVal))})},template:'<div id="ngProgress-container"><div id="ngProgress"></div></div>'};return directiveObj}]),angular.module("ngProgress",["ngProgress.directive","ngProgress.provider"]),function(){"use strict";!function(root,factory){"function"==typeof define&&define.amd?define(["d3","jquery"],factory):"object"==typeof exports?module.exports=factory(require("d3"),require("jquery")):root.MG=factory(root.d3,root.jQuery)}(this,function(d3,$){function chart_title(args){var container=d3.select(args.target);if(container.select(".mg-chart-title").remove(),args.target&&args.title){var optional_question_mark=args.show_tooltips&&args.description?'<i class="fa fa-question-circle fa-inverse description"></i>':"";if(container.insert("h2",":first-child").attr("class","mg-chart-title").html(args.title+optional_question_mark),args.show_tooltips&&args.description){var $newTitle=$(container.node()).find("h2.mg-chart-title");$newTitle.popover({html:!0,animation:!1,content:args.description,trigger:"hover",placement:"top",container:$newTitle})}}args.error&&error(args)}function y_rug(args){for(var svg=mg_get_svg_child_of(args.target),buffer_size="point"===args.chart_type?args.buffer/2:2*args.buffer/3,all_data=[],i=0;i<args.data.length;i++)for(var j=0;j<args.data[i].length;j++)all_data.push(args.data[i][j]);var rug=svg.selectAll("line.mg-y-rug").data(all_data);rug.enter().append("svg:line").attr("class","mg-y-rug").attr("opacity",.3),rug.exit().remove(),rug.exit().remove(),rug.attr("x1",args.left+1).attr("x2",args.left+buffer_size).attr("y1",args.scalefns.yf).attr("y2",args.scalefns.yf),args.color_accessor?(rug.attr("stroke",args.scalefns.color),rug.classed("mg-y-rug-mono",!1)):(rug.attr("stroke",null),rug.classed("mg-y-rug-mono",!0))}function y_axis(args){function log10(val){return 1e3===val?3:1e6===val?7:Math.log(val)/Math.LN10}args.processed||(args.processed={});var g,min_y,max_y,svg=mg_get_svg_child_of(args.target);args.scalefns.yf=function(di){return args.missing_is_hidden&&di.missing?args.scales.Y(di[args.y_accessor])+42.1234:args.scales.Y(di[args.y_accessor])};for(var _set=!1,gtZeroFilter=function(d){return d[args.y_accessor]>0},mapToY=function(d){return d[args.y_accessor]},i=0;i<args.data.length;i++){var a=args.data[i];if("log"===args.y_scale_type&&(a=a.filter(gtZeroFilter)),a.length>0){var extent=d3.extent(a,mapToY);_set?(min_y=Math.min(extent[0],min_y),max_y=Math.max(extent[1],max_y)):(min_y=extent[0],max_y=extent[1],_set=!0)}}min_y>=0&&!args.min_y&&!args.min_y_from_data&&(min_y=0),"bar"===args.chart_type&&(min_y=0,max_y=d3.max(args.data[0],function(d){var trio=[];return trio.push(d[args.y_accessor]),null!==args.baseline_accessor&&trio.push(d[args.baseline_accessor]),null!==args.predictor_accessor&&trio.push(d[args.predictor_accessor]),Math.max.apply(null,trio)})),min_y=null!==args.min_y?args.min_y:min_y,max_y=null!==args.max_y?args.max_y:max_y*args.inflator,"log"!==args.y_scale_type&&(min_y>=0?args.y_axis_negative=!1:(min_y-=max_y*(args.inflator-1),args.y_axis_negative=!0)),!args.min_y&&args.min_y_from_data&&(min_y/=args.inflator),"log"===args.y_scale_type?("histogram"===args.chart_type?min_y=.2:0>=min_y&&(min_y=1),args.scales.Y=d3.scale.log().domain([min_y,max_y]).range([args.height-args.bottom-args.buffer,args.top]).clamp(!0)):args.scales.Y=d3.scale.linear().domain([min_y,max_y]).range([args.height-args.bottom-args.buffer,args.top]),args.processed.min_y=min_y,args.processed.max_y=max_y,args.scales.Y_axis=d3.scale.linear().domain([args.processed.min_y,args.processed.max_y]).range([args.height-args.bottom-args.buffer,args.top]);var yax_format=args.yax_format;if(yax_format||(yax_format="count"===args.format?function(f){if(1>f)return args.yax_units+d3.round(f,args.decimals);var pf=d3.formatPrefix(f);return args.yax_units+pf.scale(f)+pf.symbol}:function(d_){var n=d3.format("2p");return n(d_)}),svg.selectAll(".mg-y-axis").remove(),!args.y_axis)return this;g=svg.append("g").classed("mg-y-axis",!0).classed("mg-y-axis-small",args.use_small_class),args.y_label&&g.append("text").attr("class","label").attr("x",function(){return-1*(args.top+args.buffer+(args.height-args.bottom-args.buffer-(args.top+args.buffer))/2)}).attr("y",function(){return args.left/2}).attr("dy","0.4em").attr("text-anchor","middle").text(function(){return args.y_label}).attr("transform",function(){return"rotate(-90)"});var scale_ticks=args.scales.Y.ticks(args.yax_count);"log"===args.y_scale_type&&(scale_ticks=scale_ticks.filter(function(d){return Math.abs(log10(d))%1<1e-6||Math.abs(log10(d))%1>1-1e-6}));var number_of_ticks=args.scales.Y.ticks(args.yax_count).length,data_is_int=!0;args.data.forEach(function(d){d.forEach(function(d){return d[args.y_accessor]%1!==0?(data_is_int=!1,!1):void 0})}),data_is_int&&number_of_ticks>max_y&&"count"===args.format&&(scale_ticks=scale_ticks.filter(function(d){return d%1===0}));var last_i=scale_ticks.length-1;return args.x_extended_ticks||args.y_extended_ticks||g.append("line").attr("x1",args.left).attr("x2",args.left).attr("y1",args.scales.Y(scale_ticks[0]).toFixed(2)).attr("y2",args.scales.Y(scale_ticks[last_i]).toFixed(2)),g.selectAll(".mg-yax-ticks").data(scale_ticks).enter().append("line").classed("mg-extended-y-ticks",args.y_extended_ticks).attr("x1",args.left).attr("x2",function(){return args.y_extended_ticks?args.width-args.right:args.left-args.yax_tick_length}).attr("y1",function(d){return args.scales.Y(d).toFixed(2)}).attr("y2",function(d){return args.scales.Y(d).toFixed(2)}),g.selectAll(".mg-yax-labels").data(scale_ticks).enter().append("text").attr("x",args.left-3*args.yax_tick_length/2).attr("dx",-3).attr("y",function(d){return args.scales.Y(d).toFixed(2)}).attr("dy",".35em").attr("text-anchor","end").text(function(d){var o=yax_format(d);return o}),args.y_rug&&y_rug(args),this}function y_axis_categorical(args){args.scales.Y=d3.scale.ordinal().domain(args.categorical_variables).rangeRoundBands([args.height-args.bottom-args.buffer,args.top],args.padding_percentage,args.outer_padding_percentage),args.scalefns.yf=function(di){return args.scales.Y(di[args.y_accessor])};var svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-y-axis").remove();var g=svg.append("g").classed("mg-y-axis",!0).classed("mg-y-axis-small",args.use_small_class);return args.y_axis?(g.selectAll("text").data(args.categorical_variables).enter().append("svg:text").attr("x",args.left).attr("y",function(d){return args.scales.Y(d)+args.scales.Y.rangeBand()/2+args.buffer*args.outer_padding_percentage}).attr("dy",".35em").attr("text-anchor","end").text(String),this):this}function x_rug(args){var buffer_size="point"===args.chart_type?args.buffer/2:args.buffer,svg=mg_get_svg_child_of(args.target),all_data=mg_flatten_array(args.data),rug=svg.selectAll("line.mg-x-rug").data(all_data);rug.enter().append("svg:line").attr("class","mg-x-rug").attr("opacity",.3),rug.exit().remove(),rug.exit().remove(),rug.attr("x1",args.scalefns.xf).attr("x2",args.scalefns.xf).attr("y1",args.height-args.top+buffer_size).attr("y2",args.height-args.top),args.color_accessor?(rug.attr("stroke",args.scalefns.color),rug.classed("mg-x-rug-mono",!1)):(rug.attr("stroke",null),rug.classed("mg-x-rug-mono",!0))}function x_axis(args){var g,svg=mg_get_svg_child_of(args.target);args.processed={};for(var all_data=[],i=0;i<args.data.length;i++)for(var j=0;j<args.data[i].length;j++)all_data.push(args.data[i][j]);if(args.scalefns.xf=function(di){return args.scales.X(di[args.x_accessor])},"point"===args.chart_type&&(mg_point_add_color_scale(args),mg_point_add_size_scale(args)),mg_find_min_max_x(args),args.scales.X=args.time_series?d3.time.scale():d3.scale.linear(),args.scales.X.domain([args.processed.min_x,args.processed.max_x]).range([args.left+args.buffer,args.width-args.right-args.buffer-args.additional_buffer]),svg.selectAll(".mg-x-axis").remove(),!args.x_axis)return this;g=svg.append("g").classed("mg-x-axis",!0).classed("mg-x-axis-small",args.use_small_class);args.scales.X.ticks(args.xax_count).length-1;return args.x_label&&mg_add_x_label(g,args),mg_add_x_ticks(g,args),mg_add_x_tick_labels(g,args),args.x_rug&&x_rug(args),this}function x_axis_categorical(args){var svg=mg_get_svg_child_of(args.target),additional_buffer=(args.width,0);"bar"===args.chart_type&&(additional_buffer=args.buffer+5),args.scales.X=d3.scale.ordinal().domain(args.categorical_variables.reverse()).rangeRoundBands([args.left,args.width-args.right-args.buffer-additional_buffer]),args.scalefns.xf=function(di){return args.scales.X(di[args.x_accessor])
},svg.selectAll(".mg-x-axis").remove();var g=svg.append("g").classed("mg-x-axis",!0).classed("mg-x-axis-small",args.use_small_class);if(!args.x_axis)return this;var labels=g.selectAll("text").data(args.categorical_variables).enter().append("svg:text");return labels.attr("x",function(d){return args.scales.X(d)+args.scales.X.rangeBand()/2+args.buffer*args.outer_padding_percentage+additional_buffer/2}).attr("y",args.height-args.bottom+args.buffer).attr("dy",".35em").attr("text-anchor","middle").text(String),labels.each(function(d){var elem=this,width=args.scales.X.rangeBand();truncate_text(elem,d,width)}),this}function mg_point_add_color_scale(args){var min_color,max_color,color_domain,color_range;null!==args.color_accessor&&(null===args.color_domain?"number"===args.color_type?(min_color=d3.min(args.data[0],function(d){return d[args.color_accessor]}),max_color=d3.max(args.data[0],function(d){return d[args.color_accessor]}),color_domain=[min_color,max_color]):"category"===args.color_type&&(color_domain=d3.set(args.data[0].map(function(d){return d[args.color_accessor]})).values(),color_domain.sort()):color_domain=args.color_domain,color_range=null===args.color_range?"number"===args.color_type?["blue","red"]:null:args.color_range,"number"===args.color_type?args.scales.color=d3.scale.linear().domain(color_domain).range(color_range).clamp(!0):(args.scales.color=null!==args.color_range?d3.scale.ordinal().range(color_range):color_domain.length>10?d3.scale.category20():d3.scale.category10(),args.scales.color.domain(color_domain)),args.scalefns.color=function(di){return args.scales.color(di[args.color_accessor])})}function mg_point_add_size_scale(args){var min_size,max_size,size_domain,size_range;null!==args.size_accessor&&(null===args.size_domain?(min_size=d3.min(args.data[0],function(d){return d[args.size_accessor]}),max_size=d3.max(args.data[0],function(d){return d[args.size_accessor]}),size_domain=[min_size,max_size]):size_domain=args.size_domain,size_range=null===args.size_range?[1,5]:args.size_range,args.scales.size=d3.scale.linear().domain(size_domain).range(size_range).clamp(!0),args.scalefns.size=function(di){return args.scales.size(di[args.size_accessor])})}function mg_add_x_label(g,args){g.append("text").attr("class","label").attr("x",function(){return(args.left+args.width-args.right)/2}).attr("y",(args.height-args.bottom/2).toFixed(2)).attr("dy",".50em").attr("text-anchor","middle").text(function(){return args.x_label})}function mg_default_bar_xax_format(args){return args.xax_format?args.xax_format:function(f){if(1>f)return args.xax_units+d3.round(f,args.decimals);var pf=d3.formatPrefix(f);return args.xax_units+pf.scale(f)+pf.symbol}}function mg_default_xax_format(args){if(args.xax_format)return args.xax_format;var test_point=mg_flatten_array(args.data)[0][args.x_accessor];return function(d){var diff,main_time_format,time_frame;args.time_series&&(diff=(args.processed.max_x-args.processed.min_x)/1e3,60>diff?(main_time_format=d3.time.format("%M:%S"),time_frame="seconds"):24>=diff/3600?(main_time_format=d3.time.format("%H:%M"),time_frame="less-than-a-day"):96>=diff/3600?(main_time_format=d3.time.format("%H:%M"),time_frame="four-days"):(main_time_format=d3.time.format("%b %d"),time_frame="default")),args.processed.main_x_time_format=main_time_format,args.processed.x_time_frame=time_frame;var pf=(d3.time.format("%b %d"),d3.formatPrefix(d));return test_point instanceof Date?args.processed.main_x_time_format(new Date(d)):"number"==typeof test_point?1>d?args.xax_units+d3.round(d,args.decimals):(pf=d3.formatPrefix(d),args.xax_units+pf.scale(d)+pf.symbol):d}}function mg_add_x_ticks(g,args){var last_i=args.scales.X.ticks(args.xax_count).length-1,ticks=args.scales.X.ticks(args.xax_count);args.xax_start_at_min&&(ticks[0]=args.processed.min_x),"bar"===args.chart_type||args.x_extended_ticks||args.y_extended_ticks||g.append("line").attr("x1",function(){return 0===args.xax_count?args.left+args.buffer:args.xax_start_at_min?args.scales.X(args.processed.min_x).toFixed(2):args.scales.X(args.scales.X.ticks(args.xax_count)[0]).toFixed(2)}).attr("x2",0===args.xax_count?args.width-args.right-args.buffer:args.scales.X(args.scales.X.ticks(args.xax_count)[last_i]).toFixed(2)).attr("y1",args.height-args.bottom).attr("y2",args.height-args.bottom),g.selectAll(".mg-xax-ticks").data(ticks).enter().append("line").attr("x1",function(d){return args.scales.X(d).toFixed(2)}).attr("x2",function(d){return args.scales.X(d).toFixed(2)}).attr("y1",args.height-args.bottom).attr("y2",function(){return args.x_extended_ticks?args.top:args.height-args.bottom+args.xax_tick_length}).attr("class",function(){return args.x_extended_ticks?"mg-extended-x-ticks":void 0})}function mg_add_x_tick_labels(g,args){var ticks=args.scales.X.ticks(args.xax_count);if(args.xax_start_at_min&&(ticks[0]=args.processed.min_x),g.selectAll(".mg-xax-labels").data(ticks).enter().append("text").attr("x",function(d){return args.scales.X(d).toFixed(2)}).attr("y",(args.height-args.bottom+7*args.xax_tick_length/3).toFixed(2)).attr("dy",".50em").attr("text-anchor","middle").text(function(d){return args.xax_units+args.xax_format(d)}),args.time_series&&(args.show_years||args.show_secondary_x_label)){var secondary_function,yformat,time_frame=args.processed.x_time_frame;switch(time_frame){case"seconds":secondary_function=d3.time.days,yformat=d3.time.format("%I %p");break;case"less-than-a-day":secondary_function=d3.time.days,yformat=d3.time.format("%b %d");break;case"four-days":secondary_function=d3.time.days,yformat=d3.time.format("%b %d");break;default:secondary_function=d3.time.years,yformat=d3.time.format("%Y")}var years=secondary_function(args.processed.min_x,args.processed.max_x);if(args.xax_start_at_min&&0===years.length){var first_tick=ticks[0];years=[first_tick]}else if(0===years.length){var first_tick=args.scales.X.ticks(args.xax_count)[0];years=[first_tick]}g=g.append("g").classed("mg-year-marker",!0).classed("mg-year-marker-small",args.use_small_class),"default"===time_frame&&args.show_year_markers&&g.selectAll(".mg-year-marker").data(years).enter().append("line").attr("x1",function(d){return args.scales.X(d).toFixed(2)}).attr("x2",function(d){return args.scales.X(d).toFixed(2)}).attr("y1",args.top).attr("y2",args.height-args.bottom),g.selectAll(".mg-year-marker").data(years).enter().append("text").attr("x",function(d,i){return args.xax_start_at_min&&0==i&&(d=ticks[0]),args.scales.X(d).toFixed(2)}).attr("y",(args.height-args.bottom+7*args.xax_tick_length/1.3).toFixed(2)).attr("dy",args.use_small_class?-3:0).attr("text-anchor","middle").text(function(d){return yformat(new Date(d))})}}function mg_find_min_max_x(args){var min_x,max_x,extent_x=[],all_data=[].concat.apply([],args.data),mapDtoX=function(d){return d[args.x_accessor]};if(null===args.xax_format&&delete args.xax_format,"line"===args.chart_type||"point"===args.chart_type||"histogram"===args.chart_type?(extent_x=d3.extent(all_data,mapDtoX),min_x=extent_x[0],max_x=extent_x[1]):"bar"===args.chart_type&&(min_x=0,max_x=d3.max(all_data,function(d){var trio=[d[args.x_accessor],d[args.baseline_accessor]?d[args.baseline_accessor]:0,d[args.predictor_accessor]?d[args.predictor_accessor]:0];return Math.max.apply(null,trio)})),!(min_x!==max_x||args.min_x&&args.max_x)){if(min_x instanceof Date){var yesterday=MG.clone(min_x).setDate(min_x.getDate()-1),tomorrow=MG.clone(min_x).setDate(min_x.getDate()+1);min_x=yesterday,max_x=tomorrow}else"number"==typeof min_x?(min_x-=1,max_x+=1):"string"==typeof min_x&&(min_x=Number(min_x)-1,max_x=Number(max_x)+1);args.xax_count=2}min_x=args.min_x?args.min_x:min_x,max_x=args.max_x?args.max_x:max_x,args.x_axis_negative=!1,args.processed.min_x=min_x,args.processed.max_x=max_x,mg_select_xax_format(args),args.time_series||args.processed.min_x<0&&(args.processed.min_x=args.processed.min_x-args.processed.max_x*(args.inflator-1),args.x_axis_negative=!0),args.additional_buffer="bar"===args.chart_type?5*args.buffer:0}function mg_select_xax_format(args){args.xax_format||"line"!==args.chart_type||(args.xax_format=mg_default_xax_format(args)),args.xax_format||"point"!==args.chart_type||(args.xax_format=mg_default_xax_format(args)),args.xax_format||"histogram"!==args.chart_type||(args.xax_format=mg_default_xax_format(args)),args.xax_format||"bar"!==args.chart_type||(args.xax_format=mg_default_bar_xax_format(args))}function init(args){function is_time_series(args){var first_elem=mg_flatten_array(args.data)[0];return first_elem[args.x_accessor]instanceof Date}var defaults={target:null,title:null,description:null};if(args=arguments[0],args||(args={}),args=merge_with_defaults(args,defaults),d3.select(args.target).empty())return void console.warn('The specified target element "'+args.target+'" could not be found in the page. The chart will not be rendered.');var container=d3.select(args.target),svg=container.selectAll("svg");args.time_series=is_time_series(args);var svg_width=args.width,svg_height=args.height;args.full_width&&(svg_width=get_width(args.target)),args.full_height&&(svg_height=get_height(args.target)),"bar"===args.chart_type&&null===svg_height&&(svg_height=args.height=args.data[0].length*args.bar_height+args.top+args.bottom),(!svg.selectAll(".mg-main-line").empty()&&"line"!==args.chart_type||!svg.selectAll(".mg-points").empty()&&"point"!==args.chart_type||!svg.selectAll(".mg-histogram").empty()&&"histogram"!==args.chart_type||!svg.selectAll(".mg-barplot").empty()&&"bar"!==args.chart_type)&&svg.remove(),mg_get_svg_child_of(args.target).empty()&&(svg=d3.select(args.target).append("svg").classed("linked",args.linked).attr("width",svg_width).attr("height",svg_height)),args.width=svg_width,args.height=svg_height,svg.selectAll(".mg-clip-path").remove(),svg.append("defs").attr("class","mg-clip-path").append("clipPath").attr("id","mg-plot-window-"+mg_strip_punctuation(args.target)).append("svg:rect").attr("x",args.left).attr("y",args.top).attr("width",args.width-args.left-args.right-args.buffer).attr("height",args.height-args.top-args.bottom-args.buffer+1),svg_width!==Number(svg.attr("width"))&&svg.attr("width",svg_width),svg_height!==Number(svg.attr("height"))&&svg.attr("height",svg_height),svg.attr("viewBox","0 0 "+svg_width+" "+svg_height),(args.full_width||args.full_height)&&svg.attr("preserveAspectRatio","xMinYMin meet"),svg.classed("mg-missing",!1),svg.selectAll(".mg-missing-text").remove(),svg.selectAll(".mg-missing-pane").remove(),chart_title(args),args.use_small_class=args.height-args.top-args.bottom-args.buffer<=args.small_height_threshold&&args.width-args.left-args.right-2*args.buffer<=args.small_width_threshold||args.small_text;var i=0;if(svg.selectAll(".mg-main-line")[0].length>=args.data.length)if(args.custom_line_color_map.length>0){var array_full_series=function(len){for(var arr=new Array(len),i=0;i<arr.length;i++)arr[i]=i+1;return arr},lines_to_remove=arrDiff(array_full_series(args.max_data_size),args.custom_line_color_map);for(i=0;i<lines_to_remove.length;i++)svg.selectAll(".mg-main-line.mg-line"+lines_to_remove[i]+"-color").remove()}else{var num_of_new=args.data.length,num_of_existing=svg.selectAll(".mg-main-line")[0].length;for(i=num_of_existing;i>num_of_new;i--)svg.selectAll(".mg-main-line.mg-line"+i+"-color").remove()}return this}function markers(args){function xPosition(d){return args.scales.X(d[args.x_accessor])}function xPositionFixed(d){return xPosition(d).toFixed(2)}function inRange(d){return args.scales.X(d[args.x_accessor])>args.buffer+args.left&&args.scales.X(d[args.x_accessor])<args.width-args.buffer-args.right}var gm,gb,svg=mg_get_svg_child_of(args.target);return svg.selectAll(".mg-markers").remove(),svg.selectAll(".mg-baselines").remove(),args.markers&&(gm=svg.append("g").attr("class","mg-markers"),gm.selectAll(".mg-markers").data(args.markers.filter(inRange)).enter().append("line").attr("x1",xPositionFixed).attr("x2",xPositionFixed).attr("y1",args.top).attr("y2",function(){return args.height-args.bottom-args.buffer}).attr("stroke-dasharray","3,1"),gm.selectAll(".mg-markers").data(args.markers.filter(inRange)).enter().append("text").attr("class","mg-marker-text").attr("x",xPosition).attr("y",args.top-8).attr("text-anchor","middle").text(function(d){return d.label}),preventHorizontalOverlap(gm.selectAll(".mg-marker-text")[0],args)),args.baselines&&(gb=svg.append("g").attr("class","mg-baselines"),gb.selectAll(".mg-baselines").data(args.baselines).enter().append("line").attr("x1",args.left+args.buffer).attr("x2",args.width-args.right-args.buffer).attr("y1",function(d){return args.scales.Y(d.value).toFixed(2)}).attr("y2",function(d){return args.scales.Y(d.value).toFixed(2)}),gb.selectAll(".mg-baselines").data(args.baselines).enter().append("text").attr("x",args.width-args.right-args.buffer).attr("y",function(d){return args.scales.Y(d.value).toFixed(2)}).attr("dy",-3).attr("text-anchor","end").text(function(d){return d.label})),this}function mg_window_listeners(args){mg_if_aspect_ratio_resize_svg(args)}function mg_if_aspect_ratio_resize_svg(args){(args.full_width||args.full_height)&&window.addEventListener("resize",function(){var svg=d3.select(args.target).select("svg"),aspect=svg.attr("height")/svg.attr("width"),newWidth=get_width(args.target);svg.attr("width",newWidth),svg.attr("height",aspect*newWidth)},!0)}function raw_data_transformation(args){var _is_nested_array=is_array_of_arrays(args.data);if(args.array_of_objects=!1,args.array_of_arrays=!1,args.nested_array_of_arrays=!1,args.nested_array_of_objects=!1,_is_nested_array?(args.nested_array_of_objects=args.data.map(function(d){return is_array_of_objects_or_empty(d)}),args.nested_array_of_arrays=args.data.map(function(d){return is_array_of_arrays(d)})):(args.array_of_objects=is_array_of_objects(args.data),args.array_of_arrays=is_array_of_arrays(args.data)),"line"===args.chart_type?(args.array_of_objects||args.array_of_arrays)&&(args.data=[args.data]):args.data[0]instanceof Array||(args.data=[args.data]),args.y_accessor instanceof Array&&(args.data=args.data.map(function(_d){return args.y_accessor.map(function(ya){return _d.map(function(di){return di=MG.clone(di),void 0===di[ya]?void 0:(di.multiline_y_accessor=di[ya],di)}).filter(function(di){return void 0!==di})})})[0],args.y_accessor="multiline_y_accessor"),"line"===args.chart_type)for(var i=0;i<args.data.length;i++)args.data[i].sort(function(a,b){return a[args.x_accessor]-b[args.x_accessor]});return this}function process_line(args){var is_time_series=d3.sum(args.data.map(function(series){return series.length>0&&series[0][args.x_accessor]instanceof Date}))>0;if(args.missing_is_hidden&&(args.interpolate="linear"),(args.missing_is_zero||args.missing_is_hidden)&&"line"===args.chart_type&&is_time_series)for(var i=0;i<args.data.length;i++)if(1!=args.data[i].length){for(var first=args.data[i][0],last=args.data[i][args.data[i].length-1],processed_data=[],start_date=MG.clone(first[args.x_accessor]).setDate(first[args.x_accessor].getDate()+1),from=args.min_x?args.min_x:start_date,upto=args.max_x?args.max_x:last[args.x_accessor],d=new Date(from);upto>=d;d.setDate(d.getDate()+1)){var o={};d.setHours(0,0,0,0),Date.parse(d)===Date.parse(new Date(start_date))&&processed_data.push(MG.clone(args.data[i][0]));var existing_o=null;args.data[i].forEach(function(val){return Date.parse(val[args.x_accessor])===Date.parse(new Date(d))?(existing_o=val,!1):void 0}),existing_o?processed_data.push(existing_o):(o[args.x_accessor]=new Date(d),o[args.y_accessor]=0,o.missing=!0,processed_data.push(o)),Date.parse(d)===Date.parse(new Date(last[args.x_accessor]))&&processed_data.push(last)}args.data[i]=processed_data}return this}function process_histogram(args){var extracted_data,our_data=args.data[0];if(args.binned===!1){if("object"==typeof our_data[0])extracted_data=our_data.map(function(d){return d[args.x_accessor]});else{if("number"!=typeof our_data[0])return void console.log("TypeError: expected an array of numbers, found "+typeof our_data[0]);extracted_data=our_data}var hist=d3.layout.histogram();args.bins&&(hist=hist.bins(args.bins)),args.processed_data=hist(extracted_data).map(function(d){return{x:d.x,y:d.y,dx:d.dx}})}else{args.processed_data=our_data.map(function(d){return{x:d[args.x_accessor],y:d[args.y_accessor]}});for(var this_pt,next_pt,i=0;i<args.processed_data.length;i++)this_pt=args.processed_data[i],i===args.processed_data.length-1?this_pt.dx=args.processed_data[i-1].dx:(next_pt=args.processed_data[i+1],this_pt.dx=next_pt.x-this_pt.x)}return args.data=[args.processed_data],args.x_accessor=args.processed_x_accessor,args.y_accessor=args.processed_y_accessor,this}function process_categorical_variables(args){var extracted_data,processed_data={},our_data=args.data[0],label_accessor="vertical"===args.bar_orientation?args.x_accessor:args.y_accessor,data_accessor="vertical"===args.bar_orientation?args.y_accessor:args.x_accessor;if(args.categorical_variables=[],args.binned===!1){extracted_data="object"==typeof our_data[0]?our_data.map(function(d){return d[label_accessor]}):our_data;for(var this_dp,i=0;i<extracted_data.length;i++)this_dp=extracted_data[i],-1===args.categorical_variables.indexOf(this_dp)&&args.categorical_variables.push(this_dp),processed_data.hasOwnProperty(this_dp)||(processed_data[this_dp]=0),processed_data[this_dp]+=1;processed_data=Object.keys(processed_data).map(function(d){var obj={};return obj[data_accessor]=processed_data[d],obj[label_accessor]=d,obj})}else processed_data=our_data,args.categorical_variables=d3.set(processed_data.map(function(d){return d[label_accessor]})).values(),args.categorical_variables.reverse();return args.data=[processed_data],this}function process_point(args){var data=args.data[0],x=data.map(function(d){return d[args.x_accessor]}),y=data.map(function(d){return d[args.y_accessor]});return args.least_squares&&(args.ls_line=least_squares(x,y)),this}function add_ls(args){var svg=mg_get_svg_child_of(args.target),min_x=(args.data[0],args.scales.X.ticks(args.xax_count)[0]),max_x=args.scales.X.ticks(args.xax_count)[args.scales.X.ticks(args.xax_count).length-1];d3.select(args.target).selectAll(".mg-least-squares-line").remove(),svg.append("svg:line").attr("x1",args.scales.X(min_x)).attr("x2",args.scales.X(max_x)).attr("y1",args.scales.Y(args.ls_line.fit(min_x))).attr("y2",args.scales.Y(args.ls_line.fit(max_x))).attr("class","mg-least-squares-line")}function least_squares(x_,y_){{var x,y,xi,yi;x_.length}x=x_[0]instanceof Date?x_.map(function(d){return d.getTime()}):x_,y=y_[0]instanceof Date?y_.map(function(d){return d.getTime()}):y_;for(var xhat=d3.mean(x),yhat=d3.mean(y),numerator=0,denominator=0,i=0;i<x.length;i++)xi=x[i],yi=y[i],numerator+=(xi-xhat)*(yi-yhat),denominator+=(xi-xhat)*(xi-xhat);var beta=numerator/denominator,x0=yhat-beta*xhat;return{x0:x0,beta:beta,fit:function(x){return x0+x*beta}}}function rolloverNumberFormatter(args){var num;return num="count"===args.format?function(d_){var is_float=d_%1!==0,n=d3.format("0,000");return d_=is_float?d3.round(d_,args.decimals):d_,n(d_)}:function(d_){var fmt_string=(args.decimals?"."+args.decimals:"")+"%",n=d3.format(fmt_string);return n(d_)}}function pathTween(d1,precision){return function(){for(var path0=this,path1=path0.cloneNode(),n0=path0.getTotalLength(),n1=(path1.setAttribute("d",d1),path1).getTotalLength(),distances=[0],i=0,dt=precision/Math.max(n0,n1);(i+=dt)<1;)distances.push(i);distances.push(1);var points=distances.map(function(t){var p0=path0.getPointAtLength(t*n0),p1=path1.getPointAtLength(t*n1);return d3.interpolate([p0.x,p0.y],[p1.x,p1.y])});return function(t){return 1>t?"M"+points.map(function(p){return p(t)}).join("L"):d1}}}function is_array(thing){return"[object Array]"===Object.prototype.toString.call(thing)}function is_function(thing){return"[object Function]"===Object.prototype.toString.call(thing)}function is_empty_array(thing){return is_array(thing)&&0==thing.length}function is_object(thing){return"[object Object]"===Object.prototype.toString.call(thing)}function is_array_of_arrays(data){var all_elements=data.map(function(d){return is_array(d)===!0&&d.length>0});return d3.sum(all_elements)===data.length}function is_array_of_objects(data){var all_elements=data.map(function(d){return is_object(d)===!0});return d3.sum(all_elements)===data.length}function is_array_of_objects_or_empty(data){return is_empty_array(data)||is_array_of_objects(data)}function preventHorizontalOverlap(labels,args){if(labels&&1!=labels.length)for(var i=0;i<labels.length;i++)if(isHorizontallyOverlapping(labels[i],labels)){var node=d3.select(labels[i]),newY=+node.attr("y");newY+8==args.top&&(newY=args.top-16),node.attr("y",newY)}}function preventVerticalOverlap(labels){if(labels&&1!=labels.length){labels.sort(function(b,a){return d3.select(a).attr("y")-d3.select(b).attr("y")}),labels.reverse();for(var overlap_amount,label_i,label_j,i=0;i<labels.length;i++){label_i=d3.select(labels[i]).text();for(var j=0;j<labels.length;j++)if(label_j=d3.select(labels[j]).text(),overlap_amount=isVerticallyOverlapping(labels[i],labels[j]),overlap_amount!==!1&&label_i!==label_j){var node=d3.select(labels[i]),newY=+node.attr("y");newY+=overlap_amount,node.attr("y",newY)}}}}function isVerticallyOverlapping(element,sibling){var element_bbox=element.getBoundingClientRect(),sibling_bbox=sibling.getBoundingClientRect();return element_bbox.top<=sibling_bbox.bottom&&element_bbox.top>=sibling_bbox.top?sibling_bbox.bottom-element_bbox.top:!1}function isHorizontallyOverlapping(element,labels){for(var element_bbox=element.getBoundingClientRect(),i=0;i<labels.length;i++)if(labels[i]!=element){var sibling_bbox=labels[i].getBoundingClientRect();if(element_bbox.top===sibling_bbox.top&&!(sibling_bbox.left>element_bbox.right||sibling_bbox.right<element_bbox.left))return!0}return!1}function mg_get_svg_child_of(selector_or_node){return d3.select(selector_or_node).select("svg")}function mg_flatten_array(arr){var flat_data=[];return flat_data.concat.apply(flat_data,arr)}function mg_strip_punctuation(s){var processed_s;"string"==typeof s?processed_s=s:""!=s.id?processed_s=s.id:""!=args.target.className?processed_s=s.className:""!=args.target.nodeName?processed_s=s.nodeName:console.warn("The specified target element "+s+" has no unique attributes.");var punctuationless=processed_s.replace(/[^a-zA-Z0-9 _]+/g,""),finalString=punctuationless.replace(/ +?/g,"");return finalString}function get_pixel_dimension(target,dimension){return Number(d3.select(target).style(dimension).replace(/px/g,""))}function get_width(target){return get_pixel_dimension(target,"width")}function get_height(target){return get_pixel_dimension(target,"height")}function merge_with_defaults(obj){return each(Array.prototype.slice.call(arguments,1),function(source){if(source)for(var prop in source)void 0===obj[prop]&&(obj[prop]=source[prop])}),obj}function arrDiff(a,b){var i,seen=[],diff=[];for(i=0;i<b.length;i++)seen[b[i]]=!0;for(i=0;i<a.length;i++)seen[a[i]]||diff.push(a[i]);return diff}function warnDeprecation(message,untilVersion){console.warn("Deprecation: "+message+(untilVersion?". This feature will be removed in "+untilVersion+".":" the near future.")),console.trace()}function truncate_text(textObj,textString,width){var bbox,position=0;for(textObj.textContent=textString,bbox=textObj.getBBox();bbox.width>width&&(textObj.textContent=textString.slice(0,--position)+"...",bbox=textObj.getBBox(),"..."!==textObj.textContent););}function error(args){console.log("ERROR : ",args.target," : ",args.error),d3.select(args.target).select(".mg-chart-title").append("i").attr("class","fa fa-x fa-exclamation-circle warning")}window.MG={version:"2.4.0"};var charts={};MG.globals={},MG.deprecations={rollover_callback:{replacement:"mouseover",version:"2.0"},rollout_callback:{replacement:"mouseout",version:"2.0"},show_years:{replacement:"show_secondary_x_label",version:"2.1"}},MG.globals.link=!1,MG.globals.version="1.1",MG.data_graphic=function(){var defaults={};defaults.all={missing_is_zero:!1,missing_is_hidden:!1,legend:"",legend_target:"",error:"",animate_on_load:!1,top:40,bottom:30,right:10,left:50,buffer:8,width:350,height:220,full_width:!1,full_height:!1,small_height_threshold:120,small_width_threshold:160,small_text:!1,xax_count:6,xax_tick_length:5,xax_start_at_min:!1,yax_count:5,yax_tick_length:5,x_extended_ticks:!1,y_extended_ticks:!1,y_scale_type:"linear",max_x:null,max_y:null,min_x:null,min_y:null,min_y_from_data:!1,point_size:2.5,x_accessor:"date",xax_units:"",x_label:"",x_axis:!0,y_axis:!0,y_accessor:"value",y_label:"",yax_units:"",x_rug:!1,y_rug:!1,transition_on_update:!0,mouseover:null,show_rollover_text:!0,show_confidence_band:null,xax_format:null,area:!0,chart_type:"line",data:[],decimals:2,format:"count",inflator:10/9,linked:!1,linked_format:"%Y-%m-%d",list:!1,baselines:null,markers:null,scalefns:{},scales:{},show_year_markers:!1,show_secondary_x_label:!0,target:"#viz",interpolate:"cardinal",interpolate_tension:.7,custom_line_color_map:[],max_data_size:null,aggregate_rollover:!1,show_tooltips:!0},defaults.point={buffer:16,ls:!1,lowess:!1,point_size:2.5,size_accessor:null,color_accessor:null,size_range:null,color_range:null,size_domain:null,color_domain:null,color_type:"number"},defaults.histogram={mouseover:function(d){d3.select("#histogram svg .mg-active-datapoint").text("Frequency Count: "+d.y)},binned:!1,bins:null,processed_x_accessor:"x",processed_y_accessor:"y",processed_dx_accessor:"dx",bar_margin:1},defaults.bar={y_accessor:"factor",x_accessor:"value",baseline_accessor:null,predictor_accessor:null,predictor_proportion:5,dodge_accessor:null,binned:!0,padding_percentage:0,outer_padding_percentage:.1,height:500,top:20,bar_height:20,left:70},defaults.missing={top:40,bottom:30,right:10,left:10,buffer:8,legend_target:"",width:350,height:220,missing_text:"Data currently missing or unavailable",scalefns:{},scales:{},show_tooltips:!0,show_missing_background:!0,interpolate:"cardinal"};var args=arguments[0];args||(args={}),args.list&&(args.x_accessor=0,args.y_accessor=1);for(var key in MG.deprecations)if(args.hasOwnProperty(key)){var deprecation=MG.deprecations[key],message="Use of `args."+key+"` has been deprecated",replacement=deprecation.replacement;if(replacement&&(args[replacement]?message+=". The replacement - `args."+replacement+"` - has already been defined. This definition will be discarded.":args[replacement]=args[key]),deprecation.warned)continue;deprecation.warned=!0,replacement&&(message+=" in favor of `args."+replacement+"`"),warnDeprecation(message,deprecation.version)}var a;return"missing-data"===args.chart_type?(args=merge_with_defaults(args,defaults.missing),charts.missing(args)):"point"===args.chart_type?(a=merge_with_defaults(defaults.point,defaults.all),args=merge_with_defaults(args,a),charts.point(args).mainPlot().markers().rollover().windowListeners()):"histogram"===args.chart_type?(a=merge_with_defaults(defaults.histogram,defaults.all),args=merge_with_defaults(args,a),charts.histogram(args).mainPlot().markers().rollover().windowListeners()):"bar"===args.chart_type?(a=merge_with_defaults(defaults.bar,defaults.all),args=merge_with_defaults(args,a),charts.bar(args).mainPlot().markers().rollover().windowListeners()):(args=merge_with_defaults(args,defaults.all),charts.line(args).markers().mainPlot().rollover().windowListeners()),args.data},"undefined"!=typeof jQuery&&(+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option,selector=options&&options.selector;(data||"destroy"!=option)&&(selector?(data||$this.data("bs.tooltip",data={}),data[selector]||(data[selector]=new Tooltip(this,options))):data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})}if("function"==typeof $().tooltip)return!0;var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.VERSION="3.3.1",Tooltip.TRANSITION_DURATION=150,Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self&&self.$tip&&self.$tip.is(":visible")?void(self.hoverState="in"):(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show())},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,$container=this.options.container?$(this.options.container):this.$element.parent(),containerDim=this.getPosition($container);placement="bottom"==placement&&pos.bottom+actualHeight>containerDim.bottom?"top":"top"==placement&&pos.top-actualHeight<containerDim.top?"bottom":"right"==placement&&pos.right+actualWidth>containerDim.width?"left":"left"==placement&&pos.left-actualWidth<containerDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)
}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type),that.hoverState=null,"out"==prevHoverState&&that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)},Tooltip.prototype.replaceArrow=function(delta,dimension,isHorizontal){this.arrow().css(isHorizontal?"left":"top",50*(1-delta/dimension)+"%").css(isHorizontal?"top":"left","")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(callback){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type),callback&&callback()}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete(),this.hoverState=null,this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0],isBody="BODY"==el.tagName,elRect=el.getBoundingClientRect();null==elRect.width&&(elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var elOffset=isBody?{top:0,left:0}:$element.offset(),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()},outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.width&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.getUID=function(prefix){do prefix+=~~(1e6*Math.random());while(document.getElementById(prefix));return prefix},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=this;e&&(self=$(e.currentTarget).data("bs."+this.type),self||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout),this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type)})};var old=$.fn.tooltip;$.fn.tooltip=Plugin,$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option,selector=options&&options.selector;(data||"destroy"!=option)&&(selector?(data||$this.data("bs.popover",data={}),data[selector]||(data[selector]=new Popover(this,options))):data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})}if("function"==typeof $().popover)return!0;var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.1",Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=Plugin,$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery)),"undefined"!=typeof jQuery&&+function($){function clearMenus(e){e&&3===e.which||($(backdrop).remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget)))}))}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})}if("function"==typeof $().dropdown)return!0;var backdrop=".dropdown-backdrop",toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.1",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget)}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var desc=" li:not(.divider):visible a",$items=$parent.find('[role="menu"]'+desc+', [role="listbox"]'+desc);if($items.length){var index=$items.index(e.target);38==e.which&&index>0&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=Plugin,$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',Dropdown.prototype.keydown)}(jQuery),MG.button_layout=function(target){return this.target=target,this.feature_set={},this.public_name={},this.sorters={},this.manual=[],this.manual_map={},this.manual_callback={},this._strip_punctuation=function(s){var punctuationless=s.replace(/[^a-zA-Z0-9 _]+/g,""),finalString=punctuationless.replace(/ +?/g,"");return finalString},this.data=function(data){return this._data=data,this},this.manual_button=function(feature,feature_set,callback){return this.feature_set[feature]=feature_set,this.manual_map[this._strip_punctuation(feature)]=feature,this.manual_callback[feature]=callback,this},this.button=function(feature){return arguments.length>1&&(this.public_name[feature]=arguments[1]),arguments.length>2&&(this.sorters[feature]=arguments[2]),this.feature_set[feature]=[],this},this.callback=function(callback){return this._callback=callback,this},this.display=function(){var d,f,features,feat,callback=this._callback,manual_callback=this.manual_callback,manual_map=this.manual_map;features=Object.keys(this.feature_set);var i,mapDtoF=function(f){return d[f]};for(i=0;i<this._data.length;i++){d=this._data[i],f=features.map(mapDtoF);for(var j=0;j<features.length;j++)feat=features[j],-1===this.feature_set[feat].indexOf(f[j])&&this.feature_set[feat].push(f[j])}for(feat in this.feature_set)this.sorters.hasOwnProperty(feat)&&this.feature_set[feat].sort(this.sorters[feat]);$(this.target).empty(),$(this.target).append("<div class='col-lg-12 segments text-center'></div>");var dropdownLiAClick=function(){var manual_feature,k=$(this).data("key"),feature=$(this).data("feature");return $("."+feature+"-btns button.btn span.title").html(k),manual_map.hasOwnProperty(feature)?(manual_feature=manual_map[feature],manual_callback[manual_feature](k)):callback(feature,k),!1};for(var feature in this.feature_set){for(features=this.feature_set[feature],$(this.target+" div.segments").append('<div class="btn-group '+this._strip_punctuation(feature)+'-btns text-left"><button type="button" class="btn btn-default btn-lg dropdown-toggle" data-toggle="dropdown"><span class=\'which-button\'>'+(this.public_name.hasOwnProperty(feature)?this.public_name[feature]:feature)+"</span><span class='title'>"+(this.manual_callback.hasOwnProperty(feature)?this.feature_set[feature][0]:"all")+'</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">'+(this.manual_callback.hasOwnProperty(feature)?"":'<li><a href="#" data-feature="'+feature+'" data-key="all">All</a></li>')+(this.manual_callback.hasOwnProperty(feature)?"":'<li class="divider"></li>')+"</ul></div>"),i=0;i<features.length;i++)"all"!==features[i]&&void 0!==features[i]&&$(this.target+" div."+this._strip_punctuation(feature)+"-btns ul.dropdown-menu").append('<li><a href="#" data-feature="'+this._strip_punctuation(feature)+'" data-key="'+features[i]+'">'+features[i]+"</a></li>");$("."+this._strip_punctuation(feature)+"-btns .dropdown-menu li a").on("click",dropdownLiAClick)}return this},this},charts.line=function(args){return this.args=args,this.init=function(args){return raw_data_transformation(args),process_line(args),init(args),x_axis(args),y_axis(args),this},this.mainPlot=function(){var svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-line-legend").remove();var legend_group,this_legend;args.legend&&(legend_group=svg.append("g").attr("class","mg-line-legend"));var confidence_area,data_median=0,updateTransitionDuration=args.transition_on_update?1e3:0,mapToY=function(d){return d[args.y_accessor]},area=d3.svg.area().x(args.scalefns.xf).y0(args.scales.Y.range()[0]).y1(args.scalefns.yf).interpolate(args.interpolate).tension(args.interpolate_tension),existing_band=svg.select(".mg-confidence-band");args.show_confidence_band&&(confidence_area=d3.svg.area().x(args.scalefns.xf).y0(function(d){var l=args.show_confidence_band[0];return args.scales.Y(d[l])}).y1(function(d){var u=args.show_confidence_band[1];return args.scales.Y(d[u])}).interpolate(args.interpolate).tension(args.interpolate_tension));for(var this_data,confidenceBand,line=d3.svg.line().x(args.scalefns.xf).y(args.scalefns.yf).interpolate(args.interpolate).tension(args.interpolate_tension),flat_line=d3.svg.line().x(args.scalefns.xf).y(function(){return args.scales.Y(data_median)}).interpolate(args.interpolate).tension(args.interpolate_tension),legend="",i=args.data.length-1;i>=0;i--){this_data=args.data[i];var line_id=i+1;args.custom_line_color_map.length>0&&(line_id=args.custom_line_color_map[i]),args.data[i].line_id=line_id,args.show_confidence_band&&(confidenceBand=existing_band.empty()?svg.append("path").attr("class","mg-confidence-band"):existing_band.transition().duration(function(){return args.transition_on_update?1e3:0}),confidenceBand.attr("d",confidence_area(args.data[i])).attr("clip-path","url(#mg-plot-window-"+mg_strip_punctuation(args.target)+")"));var areas=svg.selectAll(".mg-area"+line_id+"-color"),displayArea=args.area&&!args.use_data_y_min&&!args.y_axis_negative&&args.data.length<=1;displayArea?areas.empty()?svg.append("path").attr("class","mg-main-area mg-area"+line_id+"-color").attr("d",area(args.data[i])).attr("clip-path","url(#mg-plot-window-"+mg_strip_punctuation(args.target)+")"):(svg.select(".mg-y-axis").node().parentNode.appendChild(areas.node()),areas.transition().duration(updateTransitionDuration).attr("d",area(args.data[i])).attr("clip-path","url(#mg-plot-window-"+mg_strip_punctuation(args.target)+")")):areas.empty()||areas.remove();var existing_line=svg.select("path.mg-main-line.mg-line"+line_id+"-color");if(existing_line.empty())args.animate_on_load?(data_median=d3.median(args.data[i],mapToY),svg.append("path").attr("class","mg-main-line mg-line"+line_id+"-color").attr("d",flat_line(args.data[i])).transition().duration(1e3).attr("d",line(args.data[i])).attr("clip-path","url(#mg-plot-window-"+mg_strip_punctuation(args.target)+")")):svg.append("path").attr("class","mg-main-line mg-line"+line_id+"-color").attr("d",line(args.data[i])).attr("clip-path","url(#mg-plot-window-"+mg_strip_punctuation(args.target)+")");else{svg.select(".mg-y-axis").node().parentNode.appendChild(existing_line.node());var lineTransition=existing_line.transition().duration(updateTransitionDuration);displayArea?lineTransition.attr("d",line(args.data[i])):lineTransition.attrTween("d",pathTween(line(args.data[i]),4))}var the_line=svg.select(".mg-line"+line_id+"-color");if(args.missing_is_hidden&&null!==the_line.attr("d")){var x_y,x_y_plus_1,x,y,x_plus_1,y_plus_1,segment_length,bits=the_line.attr("d").split("L"),zero=args.scales.Y(0)+42.1234,dasharray=[],singleton_point_length=2,cumulative_segment_length=0;bits[0]=bits[0].replace("M",""),bits[bits.length-1]=bits[bits.length-1].replace("Z",""),args.min_x&&dasharray.push(0);for(var j=0;j<bits.length-1;j++)x_y=bits[j].split(","),x_y_plus_1=bits[j+1].split(","),x=Number(x_y[0]),y=Number(x_y[1]),x_plus_1=Number(x_y_plus_1[0]),y_plus_1=Number(x_y_plus_1[1]),segment_length=Math.sqrt(Math.pow(x-x_plus_1,2)+Math.pow(y-y_plus_1,2)),y_plus_1==zero&&y!=zero?(dasharray.push(cumulative_segment_length||singleton_point_length),cumulative_segment_length=cumulative_segment_length?segment_length:segment_length-singleton_point_length):y_plus_1!=zero&&y==zero?(dasharray.push(cumulative_segment_length+=segment_length),cumulative_segment_length=0):cumulative_segment_length+=segment_length;dasharray.length>0&&(dasharray.push(the_line.node().getTotalLength()-dasharray[dasharray.length-1]),svg.select(".mg-line"+line_id+"-color").attr("stroke-dasharray",dasharray.join()))}if(args.legend)if(is_array(args.legend)?this_legend=args.legend[i]:is_function(args.legend)&&(this_legend=args.legend(this_data)),args.legend_target)legend="<span class='mg-line"+line_id+"-legend-color'>&mdash; "+this_legend+"&nbsp; </span>"+legend;else{var last_point=this_data[this_data.length-1];legend_group.append("svg:text").classed("mg-line"+line_id+"-legend-color",!0).attr("x",args.scalefns.xf(last_point)).attr("dx",args.buffer).attr("y",args.scalefns.yf(last_point)).attr("dy",".35em").text(this_legend),preventVerticalOverlap(legend_group.selectAll(".mg-line-legend text")[0],args)}}return args.legend_target&&d3.select(args.legend_target).html(legend),this},this.markers=function(){return markers(args),this},this.rollover=function(){var g,svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-rollover-rect").remove(),svg.selectAll(".mg-voronoi").remove(),svg.selectAll(".mg-active-datapoint").remove(),svg.selectAll(".mg-line-rollover-circle").remove(),svg.selectAll(".mg-active-datapoint-container").remove(),svg.append("g").attr("class","mg-active-datapoint-container").attr("transform","translate("+(args.width-args.right)+","+args.top/2+")").append("text").attr("class","mg-active-datapoint").classed("mg-active-datapoint-small",args.use_small_class).attr("xml:space","preserve").attr("text-anchor","end"),svg.selectAll(".mg-line-rollover-circle").data(args.data).enter().append("circle").attr({"class":function(d){return["mg-line-rollover-circle","mg-line"+d.line_id+"-color","mg-area"+d.line_id+"-color"].join(" ")},cx:0,cy:0,r:0});for(var line_id=1,i=0;i<args.data.length;i++){for(var j=0;j<args.data[i].length;j++)args.data[i][j].line_id=args.custom_line_color_map.length>0?args.custom_line_color_map[i]:line_id;line_id++}var data_nested,xf;if(args.data.length>1&&!args.aggregate_rollover){var voronoi=d3.geom.voronoi().x(function(d){return args.scales.X(d[args.x_accessor]).toFixed(2)}).y(function(d){return args.scales.Y(d[args.y_accessor]).toFixed(2)}).clipExtent([[args.buffer,args.buffer],[args.width-args.buffer,args.height-args.buffer]]);g=svg.append("g").attr("class","mg-voronoi"),data_nested=d3.nest().key(function(d){return args.scales.X(d[args.x_accessor])+","+args.scales.Y(d[args.y_accessor])}).rollup(function(v){return v[0]}).entries(d3.merge(args.data.map(function(d){return d}))).map(function(d){return d.values}),g.selectAll("path").data(voronoi(data_nested)).enter().append("path").filter(function(d){return void 0!==d}).attr("d",function(d){return"M"+d.join("L")+"Z"}).datum(function(d){return d.point}).attr("class",function(d){if(args.linked){var v=d[args.x_accessor],formatter=d3.time.format(args.linked_format),id="number"==typeof v?i:formatter(v);return"mg-line"+d.line_id+"-color roll_"+id}return"mg-line"+d.line_id+"-color"}).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args))}else args.data.length>1&&args.aggregate_rollover?(data_nested=d3.nest().key(function(d){return d[args.x_accessor]}).entries(d3.merge(args.data)),xf=data_nested.map(function(di){return args.scales.X(new Date(di.key))}),g=svg.append("g").attr("class","mg-rollover-rect"),g.selectAll(".mg-rollover-rects").data(data_nested).enter().append("rect").attr("x",function(d,i){return 1===xf.length?args.left+args.buffer:0===i?xf[i].toFixed(2):((xf[i-1]+xf[i])/2).toFixed(2)}).attr("y",args.top).attr("width",function(d,i){return 1===xf.length?args.width-args.right-args.buffer:0===i?((xf[i+1]-xf[i])/2).toFixed(2):i==xf.length-1?((xf[i]-xf[i-1])/2).toFixed(2):((xf[i+1]-xf[i-1])/2).toFixed(2)}).attr("height",args.height-args.bottom-args.top-args.buffer).attr("opacity",0).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args))):(line_id=1,args.custom_line_color_map.length>0&&(line_id=args.custom_line_color_map[0]),g=svg.append("g").attr("class","mg-rollover-rect"),xf=args.data[0].map(args.scalefns.xf),g.selectAll(".mg-rollover-rects").data(args.data[0]).enter().append("rect").attr("class",function(d,i){if(args.linked){var v=d[args.x_accessor],formatter=d3.time.format(args.linked_format),id="number"==typeof v?i:formatter(v);return"mg-line"+line_id+"-color roll_"+id}return"mg-line"+line_id+"-color"}).attr("x",function(d,i){return 1===xf.length?args.left+args.buffer:0===i?xf[i].toFixed(2):((xf[i-1]+xf[i])/2).toFixed(2)}).attr("y",function(d){return args.data.length>1?args.scalefns.yf(d)-6:args.top}).attr("width",function(d,i){return 1===xf.length?args.width-args.right-args.buffer:0===i?((xf[i+1]-xf[i])/2).toFixed(2):i===xf.length-1?((xf[i]-xf[i-1])/2).toFixed(2):((xf[i+1]-xf[i-1])/2).toFixed(2)}).attr("height",function(){return args.data.length>1?12:args.height-args.bottom-args.top-args.buffer}).attr("opacity",0).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args)));if(1==args.data.length&&1==args.data[0].length)svg.select(".mg-rollover-rect rect").on("mouseover")(args.data[0][0],0);else if(args.data.length>1)for(var i=0;i<args.data.length;i++){var j=i+1;args.custom_line_color_map.length>0&&void 0!==args.custom_line_color_map[i]&&(j=args.custom_line_color_map[i]),1==args.data[i].length&&(svg.selectAll(".mg-voronoi .mg-line"+j+"-color").on("mouseover")(args.data[i][0],0),svg.selectAll(".mg-voronoi .mg-line"+j+"-color").on("mouseout")(args.data[i][0],0))}return this},this.rolloverOn=function(args){var fmt,svg=mg_get_svg_child_of(args.target);switch(args.processed.x_time_frame){case"seconds":fmt=d3.time.format("%b %e, %Y  %H:%M:%S");break;case"less-than-a-day":fmt=d3.time.format("%b %e, %Y  %I:%M%p");break;case"four-days":fmt=d3.time.format("%b %e, %Y  %I:%M%p");break;default:fmt=d3.time.format("%b %e, %Y")}return function(d,i){if(args.aggregate_rollover&&args.data.length>1)svg.selectAll("circle.mg-line-rollover-circle").style("opacity",0),d.values.forEach(function(datum){if(datum[args.x_accessor]>=args.processed.min_x&&datum[args.x_accessor]<=args.processed.max_x&&datum[args.y_accessor]>=args.processed.min_y&&datum[args.y_accessor]<=args.processed.max_y){svg.select("circle.mg-line"+datum.line_id+"-color").attr({cx:function(){return args.scales.X(datum[args.x_accessor]).toFixed(2)},cy:function(){return args.scales.Y(datum[args.y_accessor]).toFixed(2)},r:args.point_size}).style("opacity",1)}});else{if(args.missing_is_hidden&&0==d[args.y_accessor]&&d.missing)return;if(d[args.x_accessor]>=args.processed.min_x&&d[args.x_accessor]<=args.processed.max_x&&d[args.y_accessor]>=args.processed.min_y&&d[args.y_accessor]<=args.processed.max_y&&svg.selectAll("circle.mg-line-rollover-circle.mg-area"+d.line_id+"-color").attr("class","").attr("class","mg-area"+d.line_id+"-color").classed("mg-line-rollover-circle",!0).attr("cx",function(){return args.scales.X(d[args.x_accessor]).toFixed(2)}).attr("cy",function(){return args.scales.Y(d[args.y_accessor]).toFixed(2)}).attr("r",args.point_size).style("opacity",1),args.linked&&!MG.globals.link){MG.globals.link=!0;var v=d[args.x_accessor],formatter=d3.time.format(args.linked_format),id="number"==typeof v?i:formatter(v);d3.selectAll(".mg-line"+d.line_id+"-color.roll_"+id).each(function(d,i){d3.select(this).on("mouseover")(d,i)})}}svg.selectAll("text").filter(function(g){return d===g}).attr("opacity",.3);var num=rolloverNumberFormatter(args);if(args.show_rollover_text){var textContainer=svg.select(".mg-active-datapoint"),lineCount=0,lineHeight=1.1;if(textContainer.select("*").remove(),args.aggregate_rollover&&args.data.length>1){if(args.time_series){var date=new Date(d.key);textContainer.append("tspan").text((fmt(date)+"  "+args.yax_units).trim()),lineCount=1,d.values.forEach(function(datum){var label=textContainer.append("tspan").attr({x:0,y:lineCount*lineHeight+"em"}).text(num(datum[args.y_accessor]));textContainer.append("tspan").attr({x:-label.node().getComputedTextLength(),y:lineCount*lineHeight+"em"}).text("— ").classed("mg-hover-line"+datum.line_id+"-color",!0).style("font-weight","bold"),lineCount++}),textContainer.append("tspan").attr("x",0).attr("y",lineCount*lineHeight+"em").text(" ")}else d.values.forEach(function(datum){var label=textContainer.append("tspan").attr({x:0,y:lineCount*lineHeight+"em"}).text(args.x_accessor+": "+datum[args.x_accessor]+", "+args.y_accessor+": "+args.yax_units+num(datum[args.y_accessor]));textContainer.append("tspan").attr({x:-label.node().getComputedTextLength(),y:lineCount*lineHeight+"em"}).text("— ").classed("mg-hover-line"+datum.line_id+"-color",!0).style("font-weight","bold"),lineCount++});textContainer.append("tspan").attr("x",0).attr("y",lineCount*lineHeight+"em").text(" ")}else if(args.time_series){var dd=new Date(+d[args.x_accessor]);dd.setDate(dd.getDate()),textContainer.append("tspan").text(fmt(dd)+"  "+args.yax_units+num(d[args.y_accessor]))}else textContainer.append("tspan").text(args.x_accessor+": "+d[args.x_accessor]+", "+args.y_accessor+": "+args.yax_units+num(d[args.y_accessor]))}args.mouseover&&args.mouseover(d,i)}},this.rolloverOff=function(args){var svg=mg_get_svg_child_of(args.target);return function(d,i){if(args.linked&&MG.globals.link){MG.globals.link=!1;var v=d[args.x_accessor],formatter=d3.time.format(args.linked_format),id="number"==typeof v?i:formatter(v);d3.selectAll(".roll_"+id).each(function(d){d3.select(this).on("mouseout")(d)})}args.aggregate_rollover?svg.selectAll("circle.mg-line-rollover-circle").style("opacity",function(){return 0}):svg.selectAll("circle.mg-line-rollover-circle.mg-area"+d.line_id+"-color").style("opacity",function(){var id=d.line_id-1;return args.custom_line_color_map.length>0&&void 0!==args.custom_line_color_map.indexOf(d.line_id)&&(id=args.custom_line_color_map.indexOf(d.line_id)),1==args.data[id].length?1:0}),svg.select(".mg-active-datapoint").text(""),args.mouseout&&args.mouseout(d,i)}},this.rolloverMove=function(args){return function(d,i){args.mousemove&&args.mousemove(d,i)}},this.windowListeners=function(){return mg_window_listeners(this.args),this},this.init(args),this},charts.histogram=function(args){return this.args=args,this.init=function(args){return raw_data_transformation(args),process_histogram(args),init(args),x_axis(args),y_axis(args),this},this.mainPlot=function(){var svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-histogram").remove();var g=svg.append("g").attr("class","mg-histogram"),bar=g.selectAll(".mg-bar").data(args.data[0]).enter().append("g").attr("class","mg-bar").attr("transform",function(d){return"translate("+args.scales.X(d[args.x_accessor]).toFixed(2)+","+args.scales.Y(d[args.y_accessor]).toFixed(2)+")"});return bar.append("rect").attr("x",1).attr("width",function(){return 1===args.data[0].length?(args.scalefns.xf(args.data[0][0])-args.bar_margin).toFixed(2):(args.scalefns.xf(args.data[0][1])-args.scalefns.xf(args.data[0][0])-args.bar_margin).toFixed(2)}).attr("height",function(d){return 0===d[args.y_accessor]?0:(args.height-args.bottom-args.buffer-args.scales.Y(d[args.y_accessor])).toFixed(2)}),this},this.markers=function(){return markers(args),this},this.rollover=function(){var svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-rollover-rect").remove(),svg.selectAll(".mg-active-datapoint").remove(),svg.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",args.width-args.right).attr("y",args.top/2).attr("text-anchor","end");var g=svg.append("g").attr("class","mg-rollover-rect"),bar=g.selectAll(".mg-bar").data(args.data[0]).enter().append("g").attr("class",function(d,i){return args.linked?"mg-rollover-rects roll_"+i:"mg-rollover-rects"}).attr("transform",function(d){return"translate("+args.scales.X(d[args.x_accessor])+",0)"});return bar.append("rect").attr("x",1).attr("y",0).attr("width",function(d,i){return 1===args.data[0].length?(args.scalefns.xf(args.data[0][0])-args.bar_margin).toFixed(2):i!==args.data[0].length-1?(args.scalefns.xf(args.data[0][i+1])-args.scalefns.xf(d)).toFixed(2):(args.scalefns.xf(args.data[0][1])-args.scalefns.xf(args.data[0][0])).toFixed(2)}).attr("height",function(){return args.height}).attr("opacity",0).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args)),this},this.rolloverOn=function(args){{var svg=mg_get_svg_child_of(args.target);d3.time.format("%Y-%m-%d")}return function(d,i){svg.selectAll("text").filter(function(g){return d===g}).attr("opacity",.3);var fmt=d3.time.format("%b %e, %Y"),num=rolloverNumberFormatter(args);svg.selectAll(".mg-bar rect").filter(function(d,j){return j===i}).classed("active",!0),args.linked&&!MG.globals.link&&(MG.globals.link=!0,d3.selectAll(".mg-rollover-rects.roll_"+i+" rect").each(function(d){d3.select(this).on("mouseover")(d,i)})),args.show_rollover_text&&svg.select(".mg-active-datapoint").text(function(){if(args.time_series){var dd=new Date(+d[args.x_accessor]);return dd.setDate(dd.getDate()),fmt(dd)+"  "+args.yax_units+num(d[args.y_accessor])}return args.x_accessor+": "+num(d[args.x_accessor])+", "+args.y_accessor+": "+args.yax_units+num(d[args.y_accessor])}),args.mouseover&&args.mouseover(d,i)}},this.rolloverOff=function(args){var svg=mg_get_svg_child_of(args.target);return function(d,i){args.linked&&MG.globals.link&&(MG.globals.link=!1,d3.selectAll(".mg-rollover-rects.roll_"+i+" rect").each(function(d){d3.select(this).on("mouseout")(d,i)})),svg.selectAll(".mg-bar rect").classed("active",!1),svg.select(".mg-active-datapoint").text(""),args.mouseout&&args.mouseout(d,i)
}},this.rolloverMove=function(args){return function(d,i){args.mousemove&&args.mousemove(d,i)}},this.windowListeners=function(){return mg_window_listeners(this.args),this},this.init(args),this},charts.point=function(args){return this.args=args,this.init=function(args){return raw_data_transformation(args),process_point(args),init(args),x_axis(args),y_axis(args),this},this.markers=function(){return markers(args),args.least_squares&&add_ls(args),this},this.mainPlot=function(){var g,svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-points").remove(),g=svg.append("g").classed("mg-points",!0);var pts=g.selectAll("circle").data(args.data[0]).enter().append("svg:circle").attr("class",function(d,i){return"path-"+i}).attr("cx",args.scalefns.xf).attr("cy",args.scalefns.yf);return null!==args.color_accessor?(pts.attr("fill",args.scalefns.color),pts.attr("stroke",args.scalefns.color)):pts.classed("mg-points-mono",!0),null!==args.size_accessor?pts.attr("r",args.scalefns.size):pts.attr("r",args.point_size),this},this.rollover=function(){var svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-voronoi").remove(),svg.selectAll(".mg-active-datapoint").remove(),svg.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",args.width-args.right).attr("y",args.top/2).attr("text-anchor","end");var voronoi=d3.geom.voronoi().x(args.scalefns.xf).y(args.scalefns.yf).clipExtent([[args.buffer,args.buffer],[args.width-args.buffer,args.height-args.buffer]]),paths=svg.append("g").attr("class","mg-voronoi");return paths.selectAll("path").data(voronoi(args.data[0])).enter().append("path").attr("d",function(d){return void 0!==d?"M"+d.join(",")+"Z":void 0}).attr("class",function(d,i){return"path-"+i}).style("fill-opacity",0).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args)),this},this.rolloverOn=function(args){var svg=mg_get_svg_child_of(args.target);return function(d,i){svg.selectAll(".mg-points circle").classed("selected",!1);var pts=svg.selectAll(".mg-points circle.path-"+i).classed("selected",!0);args.size_accessor?pts.attr("r",function(di){return args.scalefns.size(di)+1}):pts.attr("r",args.point_size),args.linked&&!MG.globals.link&&(MG.globals.link=!0,d3.selectAll(".mg-voronoi .path-"+i).each(function(){d3.select(this).on("mouseover")(d,i)}));var fmt=d3.time.format("%b %e, %Y"),num=rolloverNumberFormatter(args);args.show_rollover_text&&svg.select(".mg-active-datapoint").text(function(){if(args.time_series){var dd=new Date(+d.point[args.x_accessor]);return dd.setDate(dd.getDate()),fmt(dd)+"  "+args.yax_units+num(d.point[args.y_accessor])}return args.x_accessor+": "+num(d.point[args.x_accessor])+", "+args.y_accessor+": "+args.yax_units+num(d.point[args.y_accessor])}),args.mouseover&&args.mouseover(d,i)}},this.rolloverOff=function(args){var svg=mg_get_svg_child_of(args.target);return function(d,i){args.linked&&MG.globals.link&&(MG.globals.link=!1,d3.selectAll(".mg-voronoi .path-"+i).each(function(){d3.select(this).on("mouseout")(d,i)}));var pts=svg.selectAll(".mg-points circle").classed("unselected",!1).classed("selected",!1);args.size_accessor?pts.attr("r",args.scalefns.size):pts.attr("r",args.point_size),svg.select(".mg-active-datapoint").text(""),args.mouseout&&args.mouseout(d,i)}},this.rolloverMove=function(args){return function(d,i){args.mousemove&&args.mousemove(d,i)}},this.update=function(){return this},this.windowListeners=function(){return mg_window_listeners(this.args),this},this.init(args),this},charts.bar=function(args){return this.args=args,this.is_vertical=!0,this.init=function(args){return raw_data_transformation(args),process_categorical_variables(args),init(args),this.is_vertical="vertical"===args.bar_orientation,this.is_vertical?(x_axis_categorical(args),y_axis(args)):(x_axis(args),y_axis_categorical(args)),this},this.mainPlot=function(){var bars,predictor_bars,pp,pp0,baseline_marks,svg=mg_get_svg_child_of(args.target),data=args.data[0],barplot=svg.select("g.mg-barplot"),fresh_render=barplot.empty(),perform_load_animation=fresh_render&&args.animate_on_load,should_transition=perform_load_animation||args.transition_on_update,transition_duration=args.transition_duration||1e3;barplot.empty()&&(barplot=svg.append("g").classed("mg-barplot",!0)),bars=bars=barplot.selectAll(".mg-bar").data(data),bars.exit().remove(),bars.enter().append("rect").classed("mg-bar",!0),args.predictor_accessor&&(predictor_bars=barplot.selectAll(".mg-bar-prediction").data(data),predictor_bars.exit().remove(),predictor_bars.enter().append("rect").classed("mg-bar-prediction",!0)),args.baseline_accessor&&(baseline_marks=barplot.selectAll(".mg-bar-baseline").data(data),baseline_marks.exit().remove(),baseline_marks.enter().append("line").classed("mg-bar-baseline",!0));var appropriate_size;return should_transition&&(bars=bars.transition().duration(transition_duration),predictor_bars&&(predictor_bars=predictor_bars.transition().duration(transition_duration)),baseline_marks&&(baseline_marks=baseline_marks.transition().duration(transition_duration))),this.is_vertical?(appropriate_size=args.scales.X.rangeBand()/1.5,perform_load_animation&&(bars.attr({height:0,y:args.scales.Y(0)}),predictor_bars&&predictor_bars.attr({height:0,y:args.scales.Y(0)}),baseline_marks&&baseline_marks.attr({y1:args.scales.Y(0),y2:args.scales.Y(0)})),bars.attr("y",args.scalefns.yf).attr("x",function(d){return args.scalefns.xf(d)+appropriate_size/2}).attr("width",appropriate_size).attr("height",function(d){return 0-(args.scalefns.yf(d)-args.scales.Y(0))}),args.predictor_accessor&&(pp=args.predictor_proportion,pp0=pp-1,predictor_bars.attr("y",function(d){return args.scales.Y(0)-(args.scales.Y(0)-args.scales.Y(d[args.predictor_accessor]))}).attr("x",function(d){return args.scalefns.xf(d)+pp0*appropriate_size/(2*pp)+appropriate_size/2}).attr("width",appropriate_size/pp).attr("height",function(d){return 0-(args.scales.Y(d[args.predictor_accessor])-args.scales.Y(0))})),args.baseline_accessor&&(pp=args.predictor_proportion,baseline_marks.attr("x1",function(d){return args.scalefns.xf(d)+appropriate_size/2-appropriate_size/pp+appropriate_size/2}).attr("x2",function(d){return args.scalefns.xf(d)+appropriate_size/2+appropriate_size/pp+appropriate_size/2}).attr("y1",function(d){return args.scales.Y(d[args.baseline_accessor])}).attr("y2",function(d){return args.scales.Y(d[args.baseline_accessor])}))):(appropriate_size=args.scales.Y.rangeBand()/1.5,perform_load_animation&&(bars.attr("width",0),predictor_bars&&predictor_bars.attr("width",0),baseline_marks&&baseline_marks.attr({x1:args.scales.X(0),x2:args.scales.X(0)})),bars.attr("x",args.scales.X(0)).attr("y",function(d){return args.scalefns.yf(d)+appropriate_size/2}).attr("height",appropriate_size).attr("width",function(d){return args.scalefns.xf(d)-args.scales.X(0)}),args.predictor_accessor&&(pp=args.predictor_proportion,pp0=pp-1,predictor_bars.attr("x",args.scales.X(0)).attr("y",function(d){return args.scalefns.yf(d)+pp0*appropriate_size/(2*pp)+appropriate_size/2}).attr("height",appropriate_size/pp).attr("width",function(d){return args.scales.X(d[args.predictor_accessor])-args.scales.X(0)})),args.baseline_accessor&&(pp=args.predictor_proportion,baseline_marks.attr("x1",function(d){return args.scales.X(d[args.baseline_accessor])}).attr("x2",function(d){return args.scales.X(d[args.baseline_accessor])}).attr("y1",function(d){return args.scalefns.yf(d)+appropriate_size/2-appropriate_size/pp+appropriate_size/2}).attr("y2",function(d){return args.scalefns.yf(d)+appropriate_size/2+appropriate_size/pp+appropriate_size/2}))),this},this.markers=function(){return markers(args),this},this.rollover=function(){var g,svg=mg_get_svg_child_of(args.target);svg.selectAll(".mg-rollover-rect").remove(),svg.selectAll(".mg-active-datapoint").remove(),svg.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",args.width-args.right).attr("y",args.top/2).attr("dy",".35em").attr("text-anchor","end"),g=svg.append("g").attr("class","mg-rollover-rect");var bar=g.selectAll(".mg-bar-rollover").data(args.data[0]).enter().append("rect").attr("class","mg-bar-rollover");return this.is_vertical?bar.attr("x",args.scalefns.xf).attr("y",function(){return args.scales.Y(0)-args.height}).attr("width",args.scales.X.rangeBand()).attr("height",args.height).attr("opacity",0).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args)):bar.attr("x",args.scales.X(0)).attr("y",args.scalefns.yf).attr("width",args.width).attr("height",args.scales.Y.rangeBand()+2).attr("opacity",0).on("mouseover",this.rolloverOn(args)).on("mouseout",this.rolloverOff(args)).on("mousemove",this.rolloverMove(args)),this},this.rolloverOn=function(args){var svg=mg_get_svg_child_of(args.target),label_accessor=this.is_vertical?args.x_accessor:args.y_accessor,data_accessor=this.is_vertical?args.y_accessor:args.x_accessor,label_units=this.is_vertical?args.yax_units:args.xax_units;return function(d,i){svg.selectAll("text").filter(function(g){return d===g}).attr("opacity",.3);var fmt=d3.time.format("%b %e, %Y"),num=rolloverNumberFormatter(args);svg.selectAll("g.mg-barplot .mg-bar").filter(function(d,j){return j===i}).classed("active",!0),args.show_rollover_text&&svg.select(".mg-active-datapoint").text(function(){if(args.time_series){var dd=new Date(+d[data_accessor]);return dd.setDate(dd.getDate()),fmt(dd)+"  "+label_units+num(d[label_accessor])}return d[label_accessor]+": "+num(d[data_accessor])}),args.mouseover&&args.mouseover(d,i)}},this.rolloverOff=function(args){var svg=mg_get_svg_child_of(args.target);return function(d,i){svg.selectAll("g.mg-barplot .mg-bar").classed("active",!1),svg.select(".mg-active-datapoint").text(""),args.mouseout&&args.mouseout(d,i)}},this.rolloverMove=function(args){return function(d,i){args.mousemove&&args.mousemove(d,i)}},this.windowListeners=function(){return mg_window_listeners(this.args),this},this.init(args),this},MG.data_table=function(args){return this.args=args,this.args.standard_col={width:150,font_size:12,font_weight:"normal"},this.args.columns=[],this.formatting_options=[["color","color"],["font-weight","font_weight"],["font-style","font_style"],["font-size","font_size"]],this._strip_punctuation=function(s){var punctuationless=s.replace(/[^a-zA-Z0-9 _]+/g,""),finalString=punctuationless.replace(/ +?/g,"");return finalString},this._format_element=function(element,value,args){this.formatting_options.forEach(function(fo){var attr=fo[0],key=fo[1];args[key]&&element.style(attr,"string"==typeof args[key]||"number"==typeof args[key]?args[key]:args[key](value))})},this._add_column=function(_args,arg_type){var standard_column=this.args.standard_col,args=merge_with_defaults(MG.clone(_args),MG.clone(standard_column));args.type=arg_type,this.args.columns.push(args)},this.target=function(){var target=arguments[0];return this.args.target=target,this},this.title=function(){return this._add_column(arguments[0],"title"),this},this.text=function(){return this._add_column(arguments[0],"text"),this},this.bullet=function(){return this},this.sparkline=function(){return this},this.number=function(){return this._add_column(arguments[0],"number"),this},this.display=function(){var args=this.args;chart_title(args);var this_column,this_title,tr,th,td_accessor,td_type,td_value,th_text,td_text,td,col,h,target=args.target,table=d3.select(target).append("table").classed("mg-data-table",!0),colgroup=table.append("colgroup"),thead=table.append("thead"),tbody=table.append("tbody");for(tr=thead.append("tr"),h=0;h<args.columns.length;h++){var this_col=args.columns[h];td_type=this_col.type,th_text=this_col.label,th_text=void 0===th_text?"":th_text,th=tr.append("th").style("width",this_col.width).style("text-align","title"===td_type?"left":"right").text(th_text),args.show_tooltips&&this_col.description&&(th.append("i").classed("fa",!0).classed("fa-question-circle",!0).classed("fa-inverse",!0),$(th[0]).popover({html:!0,animation:!1,content:this_col.description,trigger:"hover",placement:"top",container:$(th[0])}))}for(h=0;h<args.columns.length;h++)col=colgroup.append("col"),"number"===args.columns[h].type&&col.attr("align","char").attr("char",".");for(var i=0;i<args.data.length;i++){tr=tbody.append("tr");for(var j=0;j<args.columns.length;j++){if(this_column=args.columns[j],td_accessor=this_column.accessor,td_value=td_text=args.data[i][td_accessor],td_type=this_column.type,"number"===td_type){if(this_column.hasOwnProperty("round")&&!this_column.hasOwnProperty("format")&&(td_text=d3.format("0,."+this_column.round+"f")(td_text)),this_column.hasOwnProperty("value_formatter")&&(td_text=this_column.value_formatter(td_text)),this_column.hasOwnProperty("format")){this_column.round&&(td_text=d3.round(td_text,this_column.round));var formatter,this_format=this_column.format;"percentage"===this_format&&(formatter=d3.format("%p")),"count"===this_format&&(formatter=d3.format("0,000")),"temperature"===this_format&&(formatter=function(t){return t+"°"}),td_text=formatter(td_text)}this_column.hasOwnProperty("currency")&&(td_text=this_column.currency+td_text)}td=tr.append("td").classed("table-"+td_type,!0).classed("table-"+td_type+"-"+this._strip_punctuation(td_accessor),!0).attr("data-value",td_value).style("width",this_column.width).style("text-align","title"===td_type||"text"===td_type?"left":"right"),this._format_element(td,td_value,this_column),"title"===td_type?(this_title=td.append("div").text(td_text),this._format_element(this_title,td_text,this_column),args.columns[j].hasOwnProperty("secondary_accessor")&&td.append("div").text(args.data[i][args.columns[j].secondary_accessor]).classed("secondary-title",!0)):td.text(td_text)}}return this},this},charts.missing=function(args){return this.args=args,this.init=function(args){var svg_width,svg_height;svg_width=args.width,svg_height=args.height,args.full_width&&(svg_width=get_width(args.target)),args.full_height&&(svg_height=get_height(args.target)),chart_title(args),d3.select(args.target).selectAll("svg").data([args]).enter().append("svg").attr("width",svg_width).attr("height",svg_height);var svg=mg_get_svg_child_of(args.target);if(svg_width!==Number(svg.attr("width"))&&svg.attr("width",svg_width),svg_height!==Number(svg.attr("height"))&&svg.attr("height",svg_height),svg.attr("viewBox","0 0 "+svg_width+" "+svg_height),d3.select(args.target).selectAll("svg *").remove(),svg.classed("mg-missing",!0),args.legend_target&&d3.select(args.legend_target).html(""),args.show_missing_background){for(var data=[],x=1;50>=x;x++)data.push({x:x,y:Math.random()-.03*x});args.scales.X=d3.scale.linear().domain([0,data.length]).range([args.left+args.buffer,svg_width-args.right-args.buffer]),args.scales.Y=d3.scale.linear().domain([-2,2]).range([svg_height-args.bottom-2*args.buffer,args.top]),args.scalefns.xf=function(di){return args.scales.X(di.x)},args.scalefns.yf=function(di){return args.scales.Y(di.y)};var line=d3.svg.line().x(args.scalefns.xf).y(args.scalefns.yf).interpolate(args.interpolate),area=d3.svg.area().x(args.scalefns.xf).y0(args.scales.Y.range()[0]).y1(args.scalefns.yf).interpolate(args.interpolate),g=svg.append("g").attr("class","mg-missing-pane");g.append("svg:rect").classed("mg-missing-background",!0).attr("x",args.buffer).attr("y",args.buffer).attr("width",svg_width-2*args.buffer).attr("height",svg_height-2*args.buffer).attr("rx",15).attr("ry",15),g.append("path").attr("class","mg-main-line mg-line1-color").attr("d",line(data)),g.append("path").attr("class","mg-main-area mg-area1-color").attr("d",area(data))}return svg.selectAll(".mg-missing-text").data([args.missing_text]).enter().append("text").attr("class","mg-missing-text").attr("x",svg_width/2).attr("y",svg_height/2).attr("dy",".50em").attr("text-anchor","middle").text(args.missing_text),this},this.init(args),this},MG.convert={},MG.convert.date=function(data,accessor,time_format){return time_format="undefined"==typeof time_format?"%Y-%m-%d":time_format,data=data.map(function(d){var fff=d3.time.format(time_format);return d[accessor]=fff.parse(d[accessor]),d})},MG.convert.number=function(data,accessor){return data=data.map(function(d){return d[accessor]=Number(d[accessor]),d})};var each=function(obj,iterator,context){if(null===obj)return obj;if(Array.prototype.forEach&&obj.forEach===Array.prototype.forEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var k in obj)if(iterator.call(context,obj[k],k,obj)===breaker)return;return obj};return MG.clone=function(obj){var copy;if(null===obj||"object"!=typeof obj)return obj;if(obj instanceof Date)return copy=new Date,copy.setTime(obj.getTime()),copy;if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;len>i;i++)copy[i]=MG.clone(obj[i]);return copy}if(obj instanceof Object){copy={};for(var attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=MG.clone(obj[attr]));return copy}throw new Error("Unable to copy obj! Its type isn't supported.")},MG})}.call(this),function(){var Utilities,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Utilities=function(){function Utilities(){this._fireEvent=__bind(this._fireEvent,this),this._empty=__bind(this._empty,this),this._each=__bind(this._each,this)}return Utilities.prototype._addEvent=function(element,event,fn,useCapture){return null==useCapture&&(useCapture=!1),element.addEventListener(event,fn,useCapture)},Utilities.prototype._forEach=function(array,fn,bind){var i,l,_results;for(i=0,l=array.length,_results=[];l>i;)i in array&&fn.call(bind,array[i],i,array),_results.push(i++);return _results},Utilities.prototype._each=function(array,fn,bind){return array?(this._forEach(array,fn,bind),array):void 0},Utilities.prototype._pass=function(fn,args,bind){return null==args&&(args=[]),function(){return fn.apply(bind,args)}},Utilities.prototype._delay=function(fn,delay,bind,args){return null==args&&(args=[]),setTimeout(this._pass(fn,args,bind),delay)},Utilities.prototype._periodical=function(fn,periodical,bind,args){return null==args&&(args=[]),setInterval(this._pass(fn,args,bind),periodical)},Utilities.prototype._setHtml=function(element,string){return element.innerHTML=string},Utilities.prototype._getHtml=function(element){return element.innerHTML},Utilities.prototype._empty=function(element){return this._setHtml(element,"")},Utilities.prototype._fireEvent=function(event,text){return this.options[event]?this.options[event].call(this,text,this.options):void 0},Utilities.prototype._extend=function(object,properties){var key,val;for(key in properties)val=properties[key],object[key]=val;return object},Utilities}(),this.Typist=function(_super){function Typist(element,options){null==options&&(options={}),this.typeLetter=__bind(this.typeLetter,this),this.typeLetters=__bind(this.typeLetters,this),this.typeText=__bind(this.typeText,this),this.selectOffset=__bind(this.selectOffset,this),this.selectText=__bind(this.selectText,this),this.fetchVariations=__bind(this.fetchVariations,this),this.next=__bind(this.next,this),this.slide=__bind(this.slide,this),this.setupDefaults=__bind(this.setupDefaults,this),this.options={typist:element,letterSelectInterval:60,interval:3e3,sentence:void 0,selectClassName:"selectedText"},this.options=this._extend(this.options,options),this.elements={typist:this.options.typist},this.offsets={current:{index:0,text:""}},this.elements.typist&&this.setupDefaults()}return __extends(Typist,_super),Typist.prototype.setupDefaults=function(){return this.variations=0!=this.options.sentence.length?this.options.sentence:this.fetchVariations(this.elements.typist),this.newText=[],this.slide(),this.timer=this._periodical(this.slide,this.options.interval)},Typist.prototype.slide=function(){return this.offsets.current.text=this.variations[this.offsets.current.index],this.offsets.current.text=this.offsets.current.text.split(""),this._each(this.offsets.current.text,this.selectText),this.offsets.current.index=this.next(this.offsets.current.index),this._delay(function(_this){return function(){return _this.options.currentSlideIndex=_this.offsets.current.index,_this.typeText(_this.variations[_this.offsets.current.index])}}(this),this.options.letterSelectInterval*this.offsets.current.text.length),this.offsets.current.index=this.variations.length<=this.offsets.current.index?0:0===this.offsets.current.index?this.variations.length:this.offsets.current.index,this.newText.length=0},Typist.prototype.next=function(offset){return offset+=1},Typist.prototype.fetchVariations=function(element){var text,value,variations;return text=element.getAttribute("data-typist"),value=this._getHtml(element),variations=text.split(","),variations.splice(0,0,value),variations},Typist.prototype.selectText=function(letter,index){return this._delay(function(_this){return function(){return _this.selectOffset(_this.offsets.current.text.length-index-1)}}(this),index*this.options.letterSelectInterval)},Typist.prototype.selectOffset=function(offset){var selected,text,unselected;return text=this.offsets.current.text,selected=text.slice(offset,text.length),selected=selected.join(""),unselected=text.slice(0,offset),unselected=unselected.join(""),this._setHtml(this.elements.typist,""+unselected+'<em class="'+this.options.selectClassName+'">'+selected+"</em>")},Typist.prototype.typeText=function(text){return this.typeTextSplit=text.split(""),this._each(this.typeTextSplit,this.typeLetters),this._fireEvent("onSlide",text)},Typist.prototype.typeLetters=function(letter,index){return clearInterval(this.timer),this._delay(function(_this){return function(){return _this.typeLetter(letter,index)}}(this),index*this.options.letterSelectInterval)},Typist.prototype.typeLetter=function(letter,index){return this._empty(this.elements.typist),this.newText.push(letter),this._setHtml(this.elements.typist,this.newText.join("")),this.typeTextSplit.length===index+1?this.timer=this._periodical(this.slide,this.options.interval):void 0},Typist}(Utilities)}.call(this),function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory(require,exports,module):root.scrollReveal=factory()}(this,function(){return window.scrollReveal=function(window){"use strict";function scrollReveal(config){return self=this,self.elems={},self.serial=1,self.blocked=!1,self.config=extend(self.defaults,config),self.isMobile()&&!self.config.mobile||!self.isSupported()?void self.destroy():(self.config.viewport==window.document.documentElement?(window.addEventListener("scroll",handler,!1),window.addEventListener("resize",handler,!1)):self.config.viewport.addEventListener("scroll",handler,!1),void self.init(!0))}var _requestAnimFrame,extend,handler,self;return scrollReveal.prototype={defaults:{enter:"bottom",move:"8px",over:"0.6s",wait:"0s",easing:"ease",scale:{direction:"up",power:"5%"},opacity:0,mobile:!1,reset:!1,viewport:window.document.documentElement,delay:"once",vFactor:.6,complete:function(){}},init:function(flag){var serial,elem,query;query=Array.prototype.slice.call(self.config.viewport.querySelectorAll("[data-sr]")),query.forEach(function(el){serial=self.serial++,elem=self.elems[serial]={domEl:el},elem.config=self.configFactory(elem),elem.styles=self.styleFactory(elem),elem.seen=!1,el.removeAttribute("data-sr"),el.setAttribute("style",elem.styles.inline+elem.styles.initial)}),self.scrolled=self.scrollY(),self.animate(flag)},animate:function(flag){var key,elem,visible,complete;complete=function(key){var elem=self.elems[key];setTimeout(function(){elem.domEl.setAttribute("style",elem.styles.inline),elem.config.complete(elem.domEl),delete self.elems[key]},elem.styles.duration)};for(key in self.elems)self.elems.hasOwnProperty(key)&&(elem=self.elems[key],visible=self.isElemInViewport(elem),visible&&("always"===self.config.delay||"onload"===self.config.delay&&flag||"once"===self.config.delay&&!elem.seen?elem.domEl.setAttribute("style",elem.styles.inline+elem.styles.target+elem.styles.transition):elem.domEl.setAttribute("style",elem.styles.inline+elem.styles.target+elem.styles.reset),elem.seen=!0,elem.config.reset||elem.animating||(elem.animating=!0,complete(key))),!visible&&elem.config.reset&&elem.domEl.setAttribute("style",elem.styles.inline+elem.styles.initial+elem.styles.reset));self.blocked=!1},configFactory:function(elem){var parsed={},config={},words=elem.domEl.getAttribute("data-sr").split(/[, ]+/);return words=self.filter(words),words.forEach(function(keyword,i){switch(keyword){case"enter":return void(parsed.enter=words[i+1]);case"wait":return void(parsed.wait=words[i+1]);case"move":return void(parsed.move=words[i+1]);case"ease":return parsed.move=words[i+1],void(parsed.ease="ease");case"ease-in":return"up"==words[i+1]||"down"==words[i+1]?(parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],void(parsed.easing="ease-in")):(parsed.move=words[i+1],void(parsed.easing="ease-in"));case"ease-in-out":return"up"==words[i+1]||"down"==words[i+1]?(parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],void(parsed.easing="ease-in-out")):(parsed.move=words[i+1],void(parsed.easing="ease-in-out"));case"ease-out":return"up"==words[i+1]||"down"==words[i+1]?(parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],void(parsed.easing="ease-out")):(parsed.move=words[i+1],void(parsed.easing="ease-out"));case"hustle":return"up"==words[i+1]||"down"==words[i+1]?(parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],void(parsed.easing="cubic-bezier( 0.6, 0.2, 0.1, 1 )")):(parsed.move=words[i+1],void(parsed.easing="cubic-bezier( 0.6, 0.2, 0.1, 1 )"));case"over":return void(parsed.over=words[i+1]);case"reset":return void(parsed.reset="no"==words[i-1]?!1:!0);case"scale":return parsed.scale={},"up"==words[i+1]||"down"==words[i+1]?(parsed.scale.direction=words[i+1],void(parsed.scale.power=words[i+2])):void(parsed.scale.power=words[i+1]);default:return}}),config=extend(config,self.config),config=extend(config,parsed),("top"==config.enter||"bottom"==config.enter)&&(config.axis="Y"),("left"==config.enter||"right"==config.enter)&&(config.axis="X"),"hustle"==config.easing&&(config.easing="cubic-bezier( 0.6, 0.2, 0.1, 1 )"),("top"==config.enter||"left"==config.enter)&&(config.move="-"+config.move),config},styleFactory:function(elem){var transition,initial,target,reset,inline,build;return inline=elem.domEl.getAttribute("style")?elem.domEl.getAttribute("style")+"; visibility: visible; ":"visibility: visible; ",transition="-webkit-transition: -webkit-transform "+elem.config.over+" "+elem.config.easing+" "+elem.config.wait+", opacity "+elem.config.over+" "+elem.config.easing+" "+elem.config.wait+"; transition: transform "+elem.config.over+" "+elem.config.easing+" "+elem.config.wait+", opacity "+elem.config.over+" "+elem.config.easing+" "+elem.config.wait+"; -webkit-perspective: 1000;-webkit-backface-visibility: hidden;",reset="-webkit-transition: -webkit-transform "+elem.config.over+" "+elem.config.easing+" 0s, opacity "+elem.config.over+" "+elem.config.easing+" 0s; transition: transform "+elem.config.over+" "+elem.config.easing+" 0s, opacity "+elem.config.over+" "+elem.config.easing+" 0s; -webkit-perspective: 1000; -webkit-backface-visibility: hidden; ",build=function(){0!=parseInt(elem.config.move)&&(initial+=" translate"+elem.config.axis+"("+elem.config.move+")",target+=" translate"+elem.config.axis+"(0)"),0!=parseInt(elem.config.scale.power)&&("up"==elem.config.scale.direction&&(elem.config.scale.value=1-.01*parseFloat(elem.config.scale.power)),"down"==elem.config.scale.direction&&(elem.config.scale.value=1+.01*parseFloat(elem.config.scale.power)),initial+=" scale("+elem.config.scale.value+")",target+=" scale(1)"),initial+="; opacity: "+elem.config.opacity+"; ",target+="; opacity: 1; "},initial="transform:",target="transform:",build(),initial+="-webkit-transform:",target+="-webkit-transform:",build(),{transition:transition,initial:initial,target:target,reset:reset,inline:inline,duration:1e3*(parseFloat(elem.config.over)+parseFloat(elem.config.wait))}},filter:function(words){var filtered=[],sugar=["from","the","and","then","but","with","please"];return words.forEach(function(word){sugar.indexOf(word)>-1||filtered.push(word)}),filtered},getViewportH:function(){var client=self.config.viewport.clientHeight,inner=window.innerHeight;return self.config.viewport==window.document.documentElement&&inner>client?inner:client},scrollY:function(){return self.config.viewport==window.document.documentElement?window.pageYOffset:self.config.viewport.scrollTop+self.config.viewport.offsetTop},getOffset:function(el){var offsetTop=0,offsetLeft=0;do isNaN(el.offsetTop)||(offsetTop+=el.offsetTop),isNaN(el.offsetLeft)||(offsetLeft+=el.offsetLeft);while(el=el.offsetParent);return{top:offsetTop,left:offsetLeft}},isElemInViewport:function(elem){var elHeight=elem.domEl.offsetHeight,elTop=self.getOffset(elem.domEl).top,elBottom=elTop+elHeight,vFactor=elem.config.vFactor||0;return elTop+elHeight*vFactor<self.scrolled+self.getViewportH()&&elBottom-elHeight*vFactor>self.scrolled||"fixed"==(elem.domEl.currentStyle?elem.domEl.currentStyle:window.getComputedStyle(elem.domEl,null)).position},isMobile:function(){var agent=navigator.userAgent||navigator.vendor||window.opera;return/(ipad|playbook|silk|android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(agent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(agent.substr(0,4))?!0:!1},isSupported:function(){for(var sensor=document.createElement("sensor"),cssPrefix="Webkit,Moz,O,".split(","),tests=("transition "+cssPrefix.join("transition,")).split(","),i=0;i<tests.length;i++)if(""===!sensor.style[tests[i]])return!1;return!0},destroy:function(){var query;query=Array.prototype.slice.call(self.config.viewport.querySelectorAll("[data-sr]")),query.forEach(function(el){el.removeAttribute("data-sr")
})}},handler=function(){self.blocked||(self.blocked=!0,self.scrolled=self.scrollY(),_requestAnimFrame(function(){self.animate()}))},extend=function(target,src){for(var prop in src)src.hasOwnProperty(prop)&&(target[prop]=src[prop]);return target},_requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),scrollReveal}(window),scrollReveal}),!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var n in t){var r=t[n];for(var s in this.waypoints[n]){var a,l,h,p,u,c=this.waypoints[n][s],d=c.options.offset,f=c.triggerPoint,w=0,y=null==f;c.element!==c.element.window&&(w=c.adapter.offset()[r.offsetProp]),"function"==typeof d?d=d.apply(c):"string"==typeof d&&(d=parseFloat(d),c.options.offset.indexOf("%")>-1&&(d=Math.ceil(r.contextDimension*d/100))),a=r.contextScroll-r.contextOffset,c.triggerPoint=w+a-d,l=f<r.oldScroll,h=c.triggerPoint>=r.oldScroll,p=l&&h,u=!l&&!h,!y&&p?(c.queueTrigger(r.backward),o[c.group.id]=c.group):!y&&u?(c.queueTrigger(r.forward),o[c.group.id]=c.group):y&&r.oldScroll>=c.triggerPoint&&(c.queueTrigger(r.forward),o[c.group.id]=c.group)}}for(var g in o)o[g].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),function(){"use strict";this.websidduApp=angular.module("websidduApp",["ngResource","ngRoute","ngSanitize","ngProgress","ngAnimate","angulartics.google.analytics","cfp.hotkeys"])}.call(this),function(){"use strict";websidduApp.config(function($routeProvider){return $routeProvider.when("/",{templateUrl:"views/index.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"aboutCtrl"}).when("/portfolio",{templateUrl:"views/portfolio.html",controller:"portfolioCtrl",resolve:{projects:function($q,Project){var deferred;return deferred=$q.defer(),Project.query(function(data){return deferred.resolve(data,function(){return deferred.reject("Unsuccess")})}),deferred.promise}}}).when("/projects/:projectId",{templateUrl:"views/project.html",controller:"projectCtrl",resolve:{project:function($q,$timeout,Project,$route){var deferred;return deferred=$q.defer(),Project.get({id:$route.current.params.projectId},function(data){return deferred.resolve(data)},function(){return deferred.reject("Unsuccess")}),deferred.promise}}}).when("/design",{templateUrl:"views/designs.html",controller:"designsCtrl",resolve:{designs:function($q,Design){var deferred;return deferred=$q.defer(),Design.query(function(data){return deferred.resolve(data,function(){return deferred.reject("Unsuccess")})}),deferred.promise}}}).when("/designs/:designId",{templateUrl:"views/design.html",controller:"designCtrl",resolve:{design:function($q,$timeout,Design,$route){var deferred;return deferred=$q.defer(),Design.get({id:$route.current.params.designId},function(data){return deferred.resolve(data)},function(){return deferred.reject("Unsuccess")}),deferred.promise}}}).when("/contact",{templateUrl:"views/contact.html",controller:"contactCtrl"}).when("/photos",{templateUrl:"views/photo.html",controller:"photoCtrl"}).when("/blog",{templateUrl:"views/blog.html",controller:"blogCtrl"}).when("/code",{templateUrl:"views/code.html",controller:"codeCtrl"}).otherwise({templateUrl:"views/404.html",controller:"404Ctrl"})}),websidduApp.config(function($sceProvider){return $sceProvider.enabled(!1)})}.call(this),function(){websidduApp.constant({constants:{base_url:"http://api.websiddu.com/",data:{homepage:{title:"Welcome to my website | Siddhartha Gudipati",design:"I design pretty websites with photoshop creativity. I design usable wire-frames with Axure common sense. So I am a designer.",code:"I write elegant and efficient css, html and javascript, Occasionally I code ruby, python and android. So I am a frontend developer."}}}})}.call(this),function(){"use strict";angular.module("websidduApp").controller("appCtrl",function($scope,$rootScope,$location,$anchorScroll,ngProgress,constants,Project,$timeout){var progressBar;return progressBar=ngProgress,progressBar.color("#76a7fa"),$rootScope.colors=[{logo:["#D35950","#E46F61"],border:"#D35950"},{logo:["#5182BC","#5D8FCA"],border:"#5182BC"},{logo:["#DBA628","#EFBB37"],border:"#DBA628"},{logo:["#67AA48","#84BC69"],border:"#67AA48"},{logo:["#AF456E","#BC5679"],border:"#AF456E"},{logo:["#5069A3","#6F85BF"],border:"#5069A3"},{logo:["#35A7BA","#4DBFD9"],border:"#35A7BA"},{logo:["#773D99","#8D50AA"],border:"#773D99"}],$rootScope.$on("$routeChangeStart",function(){var rand;return rand=Math.floor(8*Math.random()),$rootScope.rand=rand,progressBar.start(),$timeout(function(){return $(".tooltip").hide()},1)}),$rootScope.$on("$routeChangeSuccess",function(){return progressBar.complete(),progressBar.stop(),$anchorScroll()}),$rootScope.$on("$routeChangeError",function(){return progressBar.complete(),progressBar.stop()}),$rootScope.getClass=function(path){return $location.path().substr(0,path.length)===path?"active":""},$rootScope.data=constants.data,$scope.closeNavbarInMobile=function(path){return $location.path(path),$timeout(function(){return $(".top-bar").hasClass("expanded")?$(".toggle-topbar").click():void 0},10)}}),angular.module("websidduApp").controller("404Ctrl",function(){})}.call(this),function(){"use strict";angular.module("websidduApp").controller("MainCtrl",function($scope,$rootScope,$location,$timeout,constants,$http){var sentence,type,_bindMouseWeel,_initTyped,_loadChart;return $scope.projectThumb=function(img){return{"background-image":"url("+img+")"}},type=null,sentence=["","Hello, I am Sid...","Hallo, ich bin sid...","नमस्ते, मैं सिद्धार्थ हूँ...","నమస్తే, నేను సిద్ధార్థ...","您好，我是悉达多...","வணக்கம், என் பெயர் சித்தார்த்தா..."],$scope.init=function(){return _loadChart(),_initTyped()},_initTyped=function(){return $timeout(function(){return console.log(type),type?void 0:type=new Typist($(".l-n .text")[0],{letterInterval:20,interval:3e3,sentence:sentence})},100)},_bindMouseWeel=function(){return $(window).on("mousewheel",function(){"/"===$location.path()&&$(window).scrollTop()+$(window).height()===$(document).height()&&$location.path("/portfolio")})},_loadChart=function(){return setTimeout(function(){return $http({url:""+constants.base_url+"api/github?callback=JSON_CALLBACK",method:"JSONP"}).success(function(data){return data=MG.convert.date(data.raw,"date"),MG.data_graphic({title:"<a href='https://github.com/websiddu' target='_blank'>My Github contributions</a>",description:"",animate_on_load:!0,data:data,width:$(window).width(),height:210,min_y:0,target:".landing-chart",x_accessor:"date",left:70,y_accessor:"score",y_label:"No. contributions",interpolate:"monotone",xax_count:20})})},10)},$scope.init()})}.call(this),function(){"use strict";angular.module("websidduApp").controller("projectCtrl",function($scope,Project,project,$routeParams,$rootScope,$location,$http,constants,hotkeys){var date,months,now,prev,_getImagesInProject,_initHotKeys,_initPhotoSwipe,_initSticky,_initWayPoints,_setIsVoted;return $scope.project=project,$scope.style={background:"transparent url('"+$scope.project.banner+"') center no-repeat","background-size":"cover"},date=new Date(project.date),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$scope.date=months[date.getMonth()]+" "+date.getFullYear(),$scope.images=[],$scope.isVoted=!1,$scope.votes=0,prev=null,now=null,localStorage[$location.path()]="seen",$scope.init=function(){return _getImagesInProject(),_initSticky(),$scope.votes=angular.copy(project.votes),_setIsVoted(),_initHotKeys(),_initWayPoints()},_initWayPoints=function(){return setTimeout(function(){return $(".section-heading").waypoint({handler:function(d){return 0===$(this.element).index($(".section-heading"))&&(prev=""),"down"===d?(now="– "+$(this.element).text(),prev=$(".project-page-heading-sec").text(),$(".project-page-heading-sec").text(now)):(now="– "+$(this.element).text(),$(".project-page-heading-sec").text(prev))},offset:95})},200)},_initHotKeys=function(){return hotkeys.del("right"),hotkeys.del("left"),hotkeys.bindTo($scope).add({combo:"right",description:"Move to next project",callback:function(){return project.nextProject&&"true"===$(".pswp").attr("aria-hidden")?$location.path("/projects/"+project.nextProject._id.$oid):void 0}}).add({combo:"left",description:"Move to previous project",callback:function(){return project.previousProject&&"true"===$(".pswp").attr("aria-hidden")?$location.path("/projects/"+project.previousProject._id.$oid):void 0}})},_setIsVoted=function(){return"true"===localStorage["voted_"+$routeParams.projectId]?$scope.isVoted=!0:void 0},$scope.voteUp=function(){return $scope.isVoted!==!0?$http({url:""+constants.base_url+"api/projects/"+$routeParams.projectId+"/vote",method:"POST"}).success(function(data){return localStorage["voted_"+$routeParams.projectId]=!0,$scope.isVoted=!0,$scope.project.votes=data}):void 0},_initSticky=function(){return setTimeout(function(){var nav;return nav=document.getElementById("prj-title"),sticky(nav,73)},1e3)},_getImagesInProject=function(){setTimeout(function(){var $images;return $images=$(".project-show-description .section-body img"),$images.each(function(imgA){var $img;return $img=$(this),$("<img/>").attr("src",$img.attr("src")).load(function(){var img;return img={src:$img.attr("src"),w:this.width,h:this.height,title:$img.attr("alt")},$scope.images.push(img),imgA===$images.length-1?_initPhotoSwipe():void 0})})},100)},_initPhotoSwipe=function(){return setTimeout(function(){var items,pswpElement;return pswpElement=document.querySelectorAll(".pswp")[0],items=angular.copy($scope.images),$(".project-show-description .section-body").on("click","img",function(){var gallery,options;return options={index:$(".project-show-description  .section-body img").index(this),history:!1,closeOnScroll:!1,showHideOpacity:!0,hideAnimationDuration:500,showAnimationDuration:500,getThumbBoundsFn:function(index){var pageYScroll,rect,thumbnail;return thumbnail=document.querySelectorAll(".project-show-description .section-body img")[index],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect(),{x:rect.left,y:rect.top+pageYScroll,w:rect.width}}},gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,angular.copy(items),options),gallery.init()})},10)},$scope.init()})}.call(this),function(){"use strict";angular.module("websidduApp").controller("portfolioCtrl",function($scope,$rootScope,projects,$timeout){return $scope.projects=projects,$scope.selectedSize="",$scope.sortedBy="-date",$scope.projectThumb=function(img){return{"background-image":"url("+img+")"}},$timeout(function(){return window.sr=new scrollReveal},10),$scope.projectSeen=function(prj){return localStorage[prj]}})}.call(this),function(){"use strict";angular.module("websidduApp").controller("designsCtrl",function($scope,$routeParams,$rootScope,designs){return $scope.arts=designs,$scope.prettyDate=function(date){var dateObj,format;return dateObj=new Date(date),(format=d3.time.format("%B %d, %Y"))(dateObj)}}),angular.module("websidduApp").controller("designCtrl",function($scope,$routeParams,$http,$rootScope,design,constants,hotkeys,$location){var _getRand,_initHotKeys,_setIsVoted;return $scope.art=design,$scope.randArts=null,$scope.prettyDate=function(date){var dateObj,format;return dateObj=new Date(date),(format=d3.time.format("%B %d, %Y"))(dateObj)},$scope.init=function(){return _setIsVoted(),_initHotKeys(),_getRand()},_setIsVoted=function(){return"true"===localStorage["voted_a_"+$routeParams.designId]?$scope.isVoted=!0:void 0},_initHotKeys=function(){return hotkeys.del("right"),hotkeys.del("left"),hotkeys.bindTo($scope).add({combo:"right",description:"Move to next desgin",callback:function(){return design.nextArt?$location.path("/designs/"+design.nextArt._id.$oid):void 0}}).add({combo:"left",description:"Move to previous design",callback:function(){return design.previousArt?$location.path("/designs/"+design.previousArt._id.$oid):void 0}})},_getRand=function(){return $http({url:""+constants.base_url+"api/arts/?rand=4&callback=JSON_CALLBACK",method:"JSONP"}).success(function(data){return $scope.randArts=data})},$scope.voteUp=function(){return $scope.isVoted!==!0?($scope.art.votes++,$http({url:""+constants.base_url+"api/arts/"+$routeParams.designId+"/vote",method:"POST"}).success(function(data){return localStorage["voted_a_"+$routeParams.designId]=!0,$scope.isVoted=!0,$scope.art.votes=data})):void 0},$scope.init()})}.call(this),function(){"use strict";angular.module("websidduApp").controller("codeCtrl",function(){})}.call(this),function(){"use strict";angular.module("websidduApp").controller("photoCtrl",function($scope,$rootScope,Photos){var photos;return photos=[],Photos.get().success(function(flickrData){var i,photo;for(i=0;i<flickrData.photoset.photo.length;)photo={photoUrl:"http://farm"+flickrData.photoset.photo[i].farm+".static.flickr.com/"+flickrData.photoset.photo[i].server+"/"+flickrData.photoset.photo[i].id+"_"+flickrData.photoset.photo[i].secret+".jpg",title:flickrData.photoset.photo[i].title,linkUrl:"http://www.flickr.com/photos/"+flickrData.photoset.owner+"/"+flickrData.photoset.photo[i].id+"/in/set-"+flickrData.photoset.id},photos.push(photo),i++;return $scope.photos=photos})})}.call(this),function(){"use strict";angular.module("websidduApp").controller("contactCtrl",function($scope,$http){return $scope.socialprofiles=[],$http({url:"resources/social.json",method:"GET"}).success(function(data){return $scope.socialprofiles=data})})}.call(this),function(){"use strict";angular.module("websidduApp").controller("aboutCtrl",function($scope,$http){return $scope.socialprofiles=[],$http({url:"resources/social.json",method:"GET"}).success(function(data){return $scope.socialprofiles=data}),$scope.jobs=[],$http({url:"resources/jobs.json",method:"GET"}).success(function(data){return $scope.jobs=data})})}.call(this),function(){"use strict";angular.module("websidduApp").factory("Project",["$resource","constants",function($resource,constants){var Project;return Project=$resource(constants.base_url+"api/projects/:id",{callback:"JSON_CALLBACK",isArray:!0},{get:{method:"JSONP"},query:{method:"JSONP",isArray:!0}})}])}.call(this),function(){"use strict";angular.module("websidduApp").factory("Design",["$resource","constants",function($resource,constants){var Design;return Design=$resource(constants.base_url+"api/arts/:id",{callback:"JSON_CALLBACK",isArray:!0},{get:{method:"JSONP"},query:{method:"JSONP",isArray:!0}})}])}.call(this),function(){"use strict";angular.module("websidduApp").factory("Photos",["$http","constants",function($http){var settings;return settings={flickrSet:"72157637193562255",flickrKey:"09760874ef67f578f4639472ad295afb"},this.get=function(){return $http({method:"JSONP",url:"http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id="+settings.flickrSet+"&api_key="+settings.flickrKey+"&jsoncallback=JSON_CALLBACK"})},this}])}.call(this),function(){window.ws=window.ws||{},window.ws=function(){return{init:function(){return setTimeout(function(){return $(document).foundation()},500)}}}(),$(ws.init)}.call(this);